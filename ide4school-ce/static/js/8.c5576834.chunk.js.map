{"version":3,"sources":["utils/mediaQueryBreakpoints.js","components/Modals/GeneralModal.jsx","utils/defaultProjects.js","assets/icons/run.svg","components/RunButton/RunButton.jsx","components/RunButton/StopButton.jsx","assets/icons/stop.svg","components/RunButton/RunnerControls.jsx","components/RunButton/RunBar.jsx","components/ExternalFiles/ExternalFiles.jsx","components/Editor/ErrorMessage/ErrorMessage.jsx","components/AstroPiModel/Lighting.jsx","utils/Geometry.js","utils/Orientation.js","assets/icons/humidity.svg","components/AstroPiModel/FlightCase.jsx","components/AstroPiModel/Simulator.jsx","components/AstroPiModel/AstroPiControls/Input.jsx","components/AstroPiModel/AstroPiControls/MotionInput.jsx","components/AstroPiModel/AstroPiControls/SliderInput.jsx","components/AstroPiModel/AstroPiControls/Stopwatch.jsx","assets/icons/pressure.svg","assets/icons/temperature.svg","assets/icons/reset.svg","components/AstroPiModel/AstroPiControls/AstroPiControls.jsx","components/AstroPiModel/OrientationPanel/OrientationReading.jsx","assets/icons/split_view.svg","components/AstroPiModel/OrientationPanel/OrientationResetButton.jsx","components/AstroPiModel/OrientationPanel/OrientationPanel.jsx","utils/DefaultMZCriteria.js","components/AstroPiModel/AstroPiModel.jsx","components/Editor/Runners/PythonRunner/VisualOutputPane.jsx","assets/icons/tabbed_view.svg","components/Editor/Runners/PythonRunner/OutputViewToggle.jsx","components/Editor/Runners/PythonRunner/PythonRunner.jsx","components/Modals/ErrorModal.jsx","components/Editor/Runners/HtmlRunner/HtmlRunner.jsx","components/Editor/Runners/RunnerFactory.jsx","components/Editor/Output/Output.jsx","hooks/useProject.js","hooks/useEmbeddedMode.js","components/Modals/NotFoundModal.jsx","components/Modals/AccessDeniedNoAuthModal.jsx","components/Modals/NotFoundModalEmbedded.jsx","components/Modals/AccessDeniedNoAuthModalEmbedded.jsx","components/EmbeddedViewer/EmbeddedViewer.jsx"],"names":["MOBILE_MEDIA_QUERY","concat","GeneralModal","_ref","_ref$buttons","buttons","children","defaultCallback","heading","isOpen","_ref$text","text","_ref$withCloseButton","withCloseButton","closeModal","t","useTranslation","_jsx","onKeyDown","e","key","preventDefault","_jsxs","Modal","onRequestClose","className","overlayClassName","contentLabel","parentSelector","document","querySelector","appElement","getElementById","undefined","Button","onClickHandler","ButtonIcon","CloseIcon","label","title","map","textItem","i","type","content","defaultPythonProject","identifier","project_type","name","i18n","locale","components","extension","default","image_list","to_review","defaultHtmlProject","DEFAULT_PROJECTS","python","html","_path","RunButton","_ref$embedded","embedded","props","_objectWithoutProperties","_excluded","dispatch","useDispatch","_objectSpread","window","plausible","triggerCodeRun","StopButton","codeRunStopped","useSelector","state","editor","codeRunTriggered","stop","stopCodeRun","stopDraw","_useState","useState","_useState2","_slicedToArray","button","setButton","useEffect","stopping","buttonText","disabled","setTimeout","_extends","Object","assign","bind","target","arguments","length","source","prototype","hasOwnProperty","call","apply","this","width","height","viewBox","fill","xmlns","d","RunnerControls","_ref$skinny","skinny","drawTriggered","StopIcon","buttonIconPosition","buttonOuter","RunIcon","RunBar","ExternalFiles","project","id","hidden","file","includes","ErrorMessage","error","settings","useContext","SettingsContext","fontSize","Lighting","_Fragment","intensity","angle","penumbra","position","castShadow","Geometry","_Eps","getTimestamp","Date","now","Vector","x","y","z","Math","sqrt","normalize","transpose3x3Matrix","a","dot3x3and3x1","b","rs","multiplyArrayWithScalar","s","divideArrayWithScalar","Defaults","O","X","Y","Z","NORTH","GRAVITY","clamp","value","min_value","max_value","min","max","degToRad","deg","Array","PI","radToDeg","rad","rotatemodel","mod","rotation","FlightCase","scene","useGLTF","process","leds","THREE","color","setPixel","ledIndex","r","g","ledMaterial","floor","object","getObjectByName","material","Sk","sense_hat_emit","event","data","ledData","sense_hat","pixels","parseInt","indexes","pix","from","keys","_step","_iterator","_createForOfIteratorHelper","n","done","err","f","setPixels","invalidate","scale","isDragging","targetRotationX","targetRotationY","mouseX","mouseXOnMouseDown","mouseY","mouseYOnMouseDown","windowHalfX","innerWidth","windowHalfY","innerHeight","rotationScaleFactor","Simulator","updateOrientation","handleDragStop","Canvas","frameloop","onPointerDown","clientX","clientY","onPointerUp","onPointerOut","onPointerMove","rotateOnWorldAxis","resize","polyfill","ResizeObserver","Suspense","fallback","PerspectiveCamera","makeDefault","fov","near","far","OrbitControls","enableRotate","enablePan","enableZoom","enabled","Input","defaultValue","setValue","startTransition","htmlFor","onChange","MotionInput","start_motion_callback","stop_motion_callback","motion","Toggle","icons","checked","SliderInput","unit","Icon","rtimu","random","step","parseFloat","Stopwatch","_useStopwatch","useStopwatch","autoStart","seconds","minutes","isRunning","pause","reset","hasLostFocus","setHasLostFocus","addEventListener","mz_criteria","duration","String","padStart","_path2","_path3","transform","AstroPiControls","temperature","pressure","humidity","colour","TemperatureIcon","PressureIcon","HumidityIcon","OrientationReading","round","OrientationResetButton","resetOrientation","onClick","ResetIcon","OrientationPanel","orientation","defaultMZCriteria","noInputEvents","readColour","readHumidity","readPressure","readTemperature","usedLEDs","AstroPiModel","setOrientation","gamma","low_light","gyro","accel","compass","raw_orientation","sensestick","_eventQueue","off","once","push","oldTimestamp","timestamp","newTimestamp","timeDelta","oldOrientation","raw_old_orientation","newOrientation","_gyro","c1","cos","c2","c3","s1","sin","s2","s3","R","T","_accel","_compass","fusionPose","updateRTIMU","VisualOutputPane","senseHatAlwaysEnabled","senseHatEnabled","projectImages","outputCanvas","useRef","pygalOutput","p5Output","current","innerHTML","py5","sketch","assets","p5","pygal","TurtleGraphics","_toConsumableArray","image","_defineProperty","url","setError","codeRunHandled","ref","OutputViewToggle","isSplitView","isMobile","useMediaQuery","query","TabbedViewIcon","SplitViewIcon","setIsSplitView","externalLibraries","path","dependencies","PythonRunner","projectCode","projectIdentifier","user","auth","isEmbedded","output","queryParams","URLSearchParams","location","search","get","hasVisualOutput","setHasVisualOutput","getInput","pageInput","webComponentInput","shadowRoot","runCode","input","removeAttribute","visualLibraries","outf","node","div","createElement","classList","add","Option","appendChild","scrollTop","scrollHeight","builtinRead","library","setSenseHatEnabled","triggerDraw","localProjectFiles","filter","component","filename","slice","find","builtinFiles","externalLibraryInfo","code","misceval","promiseToSuspension","fetch","then","response","builtin","ImportError","mapUrlToPromise","Promise","resolve","_reject","scriptElement","src","async","onload","body","loadDepsSynchronously","reduce","p","all","catch","Error","inf","span","setAttribute","inputSpan","focus","reject","removeInput","removeEventListener","answer","innerText","storeInput","handleError","errorMessage","message","userId","_user$profile","errorDetails","tp$str","v","replace","errorType","tp$name","constructor","lineNumber","traceback","lineno","fileName","profile","createError","prog","match","configure","inputfun","read","debugging","inputTakesPrompt","uncaughtException","asyncToPromise","importMainWithBody","store","getState","finally","_mod","shiftFocusToInput","getSelection","toString","inputBox","selection","removeAllRanges","range","createRange","setStart","collapse","addRange","Tabs","forceRenderTabPanel","TabList","Tab","TabPanel","defaultIndex","ErrorModal","additionalOnClose","isModalOpen","errorModalShowing","closeErrorModal","HtmlRunner","defaultPreviewFile","focussedFileIndex","focussedFileIndices","openFiles","justLoaded","autorunEnabled","codeHasBeenRun","_useSearchParams","useSearchParams","_useSearchParams2","searchParams","setSearchParams","_useTranslation","language","rpfDomain","RegExp","allowedInternalLinks","allowedExternalHrefs","matchingRegexes","regexArray","testString","some","reg","test","previewable","endsWith","timeout","_useState3","_useState4","previewFile","setPreviewFile","_useState5","_useState6","runningFile","setRunningFile","_useState7","_useState8","externalLink","setExternalLink","getBlobURL","blob","Blob","URL","createObjectURL","parentTag","tag","_node$parentNode","parentNode","tagName","toLowerCase","eventListener","_event$data","_event$data2","_event$data3","msg","payload","linkTo","clearTimeout","showErrorModal","fromEntries","page","indexPage","parse","focussedComponent","querySelectorAll","forEach","hrefNode","_hrefNode$attrs","projectFile","attrs","href","projectFileBlob","updatedProjectFile","cssProjectImgs","matchingExternalHref","srcNode","projectImage","onLoad","iframe","contentDocument","getAttribute","getFilename","linkElement","RunnerFactory","Selected","projectType","Output","isBrowserPreview","useProject","_ref$projectIdentifie","_ref$code","_ref$accessToken","accessToken","getCachedProject","JSON","localStorage","getItem","cachedProject","setCachedProject","setProject","syncProject","useEmbeddedMode","embed","setEmbedded","NotFoundModal","_props$buttons","_props$text","_props$withCloseButto","_props$withClickToClo","withClickToClose","notFoundModalShowing","closeNotFoundModal","createNewProject","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","access_token","autosave","AccessDeniedNoAuthModal","accessDeniedNoAuthModalShowing","accessDeniedData","modals","accessDenied","closeAccessDeniedNoAuthModal","LoginButton","login","NotFoundModalEmbedded","AccessDeniedNoAuthModalEmbedded","EmbeddedViewer","loading","useParams"],"mappings":"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","file":"static/js/8.c5576834.chunk.js","sourcesContent":["export const MOBILE_BREAKPOINT = \"600px\";\nexport const MOBILE_MEDIA_QUERY = `(max-width: ${MOBILE_BREAKPOINT})`;\n","import React from \"react\";\nimport Modal from \"react-modal\";\n\nimport Button from \"../Button/Button\";\nimport \"../../assets/stylesheets/Modal.scss\";\nimport { useTranslation } from \"react-i18next\";\nimport CloseIcon from \"../../utils/CloseIcon\";\n\nconst GeneralModal = ({\n  buttons = [],\n  children,\n  defaultCallback,\n  heading,\n  isOpen,\n  text = [],\n  withCloseButton = false,\n  closeModal,\n}) => {\n  const { t } = useTranslation();\n\n  const onKeyDown = (e) => {\n    if (e.key === \"Enter\" && defaultCallback) {\n      e.preventDefault();\n      defaultCallback();\n    }\n  };\n\n  return (\n    <div onKeyDown={onKeyDown}>\n      <Modal\n        isOpen={isOpen}\n        onRequestClose={closeModal}\n        className=\"modal-content\"\n        overlayClassName=\"modal-overlay\"\n        contentLabel={heading}\n        parentSelector={() => document.querySelector(\"#app\")}\n        appElement={document.getElementById(\"app\") || undefined}\n      >\n        <div className=\"modal-content__header\">\n          <h2 className=\"modal-content__heading\">{heading}</h2>\n          {withCloseButton ? (\n            <Button\n              className=\"btn--tertiary\"\n              onClickHandler={closeModal}\n              ButtonIcon={CloseIcon}\n              label={t(\"modals.close\")}\n              title={t(\"modals.close\")}\n            />\n          ) : null}\n        </div>\n        <div className=\"modal-content__body\">\n          {text.map((textItem, i) =>\n            textItem.type === \"subheading\" ? (\n              <h3 className=\"modal-content__subheading\" key={i}>\n                {textItem.content}\n              </h3>\n            ) : (\n              <p className=\"modal-content__text\" key={i}>\n                {textItem.content}\n              </p>\n            ),\n          )}\n          {children}\n        </div>\n        <div className=\"modal-content__buttons\">{buttons}</div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default GeneralModal;\n","import i18n from \"./i18n\";\n\nexport const defaultPythonProject = {\n  identifier: \"new\",\n  project_type: \"python\",\n  name: i18n.t(\"project.untitled\"),\n  locale: null,\n  components: [{ extension: \"py\", name: \"main\", content: \"\", default: true }],\n  image_list: [],\n  to_review: false,\n};\n\nexport const defaultHtmlProject = {\n  project_type: \"html\",\n  name: i18n.t(\"project.untitled\"),\n  components: [\n    {\n      extension: \"html\",\n      name: \"index\",\n      content: \"\",\n    },\n    { extension: \"css\", name: \"style\", content: \"\" },\n  ],\n  to_review: false,\n};\n\nexport const DEFAULT_PROJECTS = {\n  python: defaultPythonProject,\n  html: defaultHtmlProject,\n};\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgRun(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 14,\n    viewBox: \"0 0 11 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 14V0l11 7-11 7z\"\n  })));\n}\nexport default SvgRun;","import Button from \"../Button/Button\";\n\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { triggerCodeRun } from \"../../redux/EditorSlice\";\n\nconst RunButton = ({ embedded = false, className, ...props }) => {\n  const dispatch = useDispatch();\n\n  const onClickRun = () => {\n    if (window.plausible) {\n      window.plausible(`Run button${embedded ? \" embedded\" : \"\"}`);\n    }\n    dispatch(triggerCodeRun());\n  };\n\n  return (\n    <Button\n      className={`btn--primary btn--run${className ? ` ${className}` : \"\"}`}\n      onClickHandler={onClickRun}\n      {...props}\n    />\n  );\n};\n\nexport default RunButton;\n","import Button from \"../Button/Button\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { stopCodeRun, stopDraw } from \"../../redux/EditorSlice\";\nimport { useTranslation } from \"react-i18next\";\n\nconst StopButton = ({ embedded = false, className, ...props }) => {\n  const codeRunStopped = useSelector((state) => state.editor.codeRunStopped);\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const onClickStop = () => {\n    if (window.plausible) {\n      window.plausible(`Stop button${embedded ? \" embedded\" : \"\"}`);\n    }\n    if (codeRunTriggered) {\n      dispatch(stopCodeRun());\n    }\n    dispatch(stopDraw());\n  };\n\n  const stop = (\n    <Button\n      className={`btn--primary btn--stop${className ? ` ${className}` : \"\"}`}\n      onClickHandler={onClickStop}\n      {...props}\n    />\n  );\n  const [button, setButton] = useState(stop);\n\n  useEffect(() => {\n    if (codeRunStopped) {\n      const stopping = (\n        <Button\n          className={`${className ? ` ${className}` : \"\"}`}\n          buttonText={t(\"runButton.stopping\")}\n          disabled\n        />\n      );\n      setTimeout(() => {\n        setButton(stopping);\n      }, 100);\n    }\n  }, [className, codeRunStopped, t]);\n\n  return button;\n};\n\nexport default StopButton;\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgStop(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 12,\n    viewBox: \"0 0 12 12\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 12V0h12v12H0z\"\n  })));\n}\nexport default SvgStop;","import React from \"react\";\nimport RunButton from \"./RunButton\";\nimport StopButton from \"./StopButton\";\nimport { useSelector } from \"react-redux\";\nimport RunIcon from \"../../assets/icons/run.svg\";\nimport StopIcon from \"../../assets/icons/stop.svg\";\nimport { useTranslation } from \"react-i18next\";\nimport \"../../assets/stylesheets/RunnerControls.scss\";\n\nconst RunnerControls = ({ embedded = false, skinny = false }) => {\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const drawTriggered = useSelector((state) => state.editor.drawTriggered);\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"runner-controls\">\n      {codeRunTriggered || drawTriggered ? (\n        <StopButton\n          embedded={embedded}\n          buttonText={t(\"runButton.stop\")}\n          ButtonIcon={StopIcon}\n          buttonIconPosition=\"right\"\n          buttonOuter={skinny}\n          className={`btn--stop btn--primary${skinny ? \" btn--small\" : \"\"}`}\n        />\n      ) : (\n        <RunButton\n          embedded={embedded}\n          buttonText={t(\"runButton.run\")}\n          ButtonIcon={RunIcon}\n          buttonIconPosition=\"right\"\n          buttonOuter={skinny}\n          className={skinny ? \"btn--small\" : \"\"}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default RunnerControls;\n","import React from \"react\";\nimport RunnerControls from \"./RunnerControls\";\n\nimport \"../../assets/stylesheets/RunBar.scss\";\n\nconst RunBar = ({ embedded = false }) => {\n  return (\n    <div className=\"run-bar\">\n      <RunnerControls embedded={embedded} />\n    </div>\n  );\n};\n\nexport default RunBar;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\n\nconst ExternalFiles = () => {\n  const project = useSelector((state) => state.editor.project);\n\n  return (\n    <div id=\"file-content\" hidden>\n      {project.components.map((file, i) => {\n        if ([\"csv\", \"txt\"].includes(file.extension)) {\n          return (\n            <div id={`${file.name}.${file.extension}`} key={i}>\n              {file.content}\n            </div>\n          );\n        }\n        return null;\n      })}\n    </div>\n  );\n};\n\nexport default ExternalFiles;\n","import React, { useContext } from \"react\";\nimport \"../../../assets/stylesheets/ErrorMessage.scss\";\nimport { useSelector } from \"react-redux\";\nimport { SettingsContext } from \"../../../utils/settings\";\n\nconst ErrorMessage = () => {\n  const error = useSelector((state) => state.editor.error);\n  const settings = useContext(SettingsContext);\n\n  return error ? (\n    <div className={`error-message error-message--${settings.fontSize}`}>\n      <p className=\"error-message__content\">{error}</p>\n    </div>\n  ) : null;\n};\n\nexport default ErrorMessage;\n","import React from \"react\";\n\nconst Lighting = () => {\n  return (\n    <>\n      <ambientLight intensity={0.25} />\n      <pointLight\n        intensity={0.35}\n        angle={28}\n        penumbra={2}\n        position={[0.418, 16.199, 0.3]}\n        castShadow\n      />\n      <pointLight\n        position={[-16.116, 14.37, 8.208]}\n        intensity={0.5}\n        castShadow\n      />\n      <pointLight\n        position={[-16.109, 18.021, -8.207]}\n        intensity={0.5}\n        castShadow\n      />\n      <pointLight\n        position={[14.904, 12.198, -1.832]}\n        intensity={0.17}\n        castShadow\n      />\n      <pointLight\n        position={[-0.462, 8.89, 14.52]}\n        intensity={0.43}\n        castShadow\n      />\n      <pointLight\n        position={[3.235, 11.486, -12.541]}\n        intensity={0.2}\n        castShadow\n      />\n      <pointLight position={[0.0, -20.0, 0.0]} intensity={0.5} castShadow />\n    </>\n  );\n};\n\nexport default Lighting;\n","var Geometry = {\n  _Eps: 1e-5,\n};\n\nGeometry.Vector = function (x, y, z) {\n  this.x = x;\n  this.y = y;\n  this.z = z;\n};\n\nGeometry.Vector.prototype = {\n  length: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function () {\n    var length = this.length();\n    if (length <= Geometry._Eps) return;\n\n    this.x /= length;\n    this.y /= length;\n    this.z /= length;\n  },\n};\n\n/**\n * Transposes a 2-dim Array\n *\n * @param {Array} a - 3x3 matrix\n *\n * @returns {Array} transposed a\n */\nGeometry.transpose3x3Matrix = function (a) {\n  var t = [\n    [0, 0, 0],\n    [0, 0, 0],\n    [0, 0, 0],\n  ];\n\n  t[0][0] = a[0][0];\n  t[0][1] = a[1][0];\n  t[0][2] = a[2][0];\n\n  t[1][0] = a[0][1];\n  t[1][1] = a[1][1];\n  t[1][2] = a[2][1];\n\n  t[2][0] = a[0][2];\n  t[2][1] = a[1][2];\n  t[2][2] = a[2][2];\n\n  return t;\n};\n\n/**\n * Dot multiplication of a 3 by 3 and a 3 by 1 array\n *\n * @returns {Array} 3 by 1 array\n */\nGeometry.dot3x3and3x1 = function (a, b) {\n  var rs = [];\n\n  rs[0] = a[0][0] * b[0] + a[0][1] * b[1] + a[0][2] * b[2];\n  rs[1] = a[1][0] * b[0] + a[1][1] * b[1] + a[1][2] * b[2];\n  rs[2] = a[2][0] * b[0] + a[2][1] * b[1] + a[2][2] * b[2];\n\n  return rs;\n};\n\n/**\n * Mulitplies each array element in a with the scalar s\n *\n * @param {Array} a - array/vector with 3 elements\n * @param {Number} s - scalar\n *\n * @returns {Array}\n */\nGeometry.multiplyArrayWithScalar = function (a, s) {\n  return [a[0] * s, a[1] * s, a[2] * s];\n};\n\n/**\n * Divides each array element in a by scalar s\n *\n * @param {Array} a - array/vector with 3 elements\n * @param {Number} s - scalar\n *\n * @returns {Array}\n */\nGeometry.divideArrayWithScalar = function (a, s) {\n  return [a[0] / s, a[1] / s, a[2] / s];\n};\n\n// Some useful defaults for the orientation calculations\nGeometry.Defaults = {};\nGeometry.Defaults.O = [0, 0, 0]; // originm (0, 0, 0)\nGeometry.Defaults.X = [1, 0, 0]; // x mask\nGeometry.Defaults.Y = [0, 1, 0]; // y mask\nGeometry.Defaults.Z = [0, 0, 1]; // z mask\n\nGeometry.Defaults.NORTH = Geometry.multiplyArrayWithScalar(\n  Geometry.Defaults.X,\n  0.33,\n);\n\n// Gravity vector\nGeometry.Defaults.GRAVITY = Geometry.Defaults.Z;\n\n/**\n * Constrain/clamp a given value to upper and lower limit\n */\nGeometry.clamp = function (value, min_value, max_value) {\n  var clampVal = Math.min(max_value, Math.max(min_value, value));\n  return clampVal;\n};\n\n/**\n * Converts degrees to radians\n *\n * @param {Number|Array} deg - number or vector array (3 elements)\n *\n * @returns {Number|Array} depends on the deg param\n */\nGeometry.degToRad = function (deg) {\n  if (deg instanceof Array) {\n    return [\n      (deg[0] * Math.PI) / 180,\n      (deg[1] * Math.PI) / 180,\n      (deg[2] * Math.PI) / 180,\n    ];\n  }\n  return (deg * Math.PI) / 180;\n};\n\n/**\n * Converts radians to degrees\n *\n * @param {Number|Array} rad - number or vector array (3 elements)\n *\n * @returns {Number|Array} depends on the rad param\n */\nGeometry.radToDeg = function (rad) {\n  if (rad instanceof Array) {\n    return [\n      (rad[0] * 180) / Math.PI,\n      (rad[1] * 180) / Math.PI,\n      (rad[2] * 180) / Math.PI,\n    ];\n  }\n  return (rad * 180) / Math.PI;\n};\n\nexport { Geometry };\n","import { Geometry } from \"./Geometry\";\nimport Sk from \"skulpt\";\n\nfunction getTimestamp() {\n  var time = Date.now(); // millis\n  var timestamp = time * 1e3; // milliseconds\n  return timestamp;\n}\n\n/**\n * Update call for periodically updating our internal sensehat data object.\n *\n * The UI events and the polling are async and therefore we can \"simulate\"\n * even changes when the user does not rotate.\n */\nexport function updateRTIMU() {\n  // Retriev the previous timestamp\n  var oldTimestamp = Sk.sense_hat.rtimu.timestamp;\n\n  // Special case, if we call this function the first time and\n  // the window.sense_hat.rtimu object has not been initialized\n  if (oldTimestamp === null || oldTimestamp === undefined) {\n    oldTimestamp = getTimestamp();\n  }\n\n  // Get a new timestamp and calc the delta\n  var newTimestamp = getTimestamp();\n  var timeDelta = (newTimestamp - oldTimestamp) / 1e6;\n\n  // Special case, when the delta is 0, everything gets null\n  // Using a sane interval should avoid this case\n  // Keeping it for now\n  //console.info(\"timeDelta\", timeDelta);\n  if (timeDelta === 0) {\n    timeDelta = 1;\n  }\n\n  // Get a copy of the old orientation in degrees (fusionPose is in radians)\n  var oldOrientation = Sk.sense_hat.rtimu.raw_old_orientation;\n\n  if (oldOrientation === null || oldOrientation === undefined) {\n    oldOrientation = [0, 90, 0];\n  }\n  var newOrientation = Geometry.degToRad(Sk.sense_hat.rtimu.raw_orientation);\n\n  // Gyro is the rate of change of the orientation\n  // Actually it is: gyro = (newOrientation - oldOrientation) / timeDelta\n  var _gyro = [\n    newOrientation[0] - oldOrientation[0],\n    newOrientation[1] - oldOrientation[1],\n    newOrientation[2] - oldOrientation[2],\n  ];\n\n  // Divide the orientation delta by the time delta\n  _gyro = Geometry.divideArrayWithScalar(_gyro, timeDelta);\n\n  // Now we need x, y, z in radians\n  var x = newOrientation[0]; // deOr.roll;\n  var y = newOrientation[1]; // deOr.pitch;\n  var z = newOrientation[2]; // deOr.yaw;\n\n  // Calculate values for the rotation matrix\n  var c1 = Math.cos(z);\n  var c2 = Math.cos(y);\n  var c3 = Math.cos(x);\n  var s1 = Math.sin(z);\n  var s2 = Math.sin(y);\n  var s3 = Math.sin(x);\n\n  // Rotation Matrix for the orientation (again euler angles)\n  var R = [\n    [c1 * c2, c1 * s2 * s3 - c3 * s1, s1 * s3 + c1 * c3 * s2],\n    [c2 * s1, c1 * c3 + s1 * s2 * s3, c3 * s1 * s2 - c1 * s3],\n    [-s2, c2 * s3, c2 * c3],\n  ];\n\n  // Transposed R matrix\n  var T = Geometry.transpose3x3Matrix(R);\n\n  // Acceleration is the transposed rotation matrix dot multiplied with gravity vector\n  var _accel = Geometry.dot3x3and3x1(T, Geometry.Defaults.GRAVITY);\n\n  // Compass is tranposed rotation matrix dot multiplied with the north vector\n  var _compass = Geometry.dot3x3and3x1(T, Geometry.Defaults.NORTH);\n\n  // store current orient to access it alter as old orient\n  Sk.sense_hat.rtimu.raw_old_orientation = newOrientation;\n\n  // update fusionPose (which is the orientation) and the timestamp values\n  Sk.sense_hat.rtimu.fusionPose = newOrientation;\n  Sk.sense_hat.rtimu.timestamp = newTimestamp;\n\n  /* Update the internal rtimu data object */\n\n  // The values are Floats representing the angle of the axis in degrees\n  // _accel = perturb(_accel, 0.1);\n  Sk.sense_hat.rtimu.accel = [\n    Geometry.clamp(_accel[0], -8, 8),\n    Geometry.clamp(_accel[1], -8, 8),\n    Geometry.clamp(_accel[2], -8, 8),\n  ];\n\n  // _gyro = perturb(_gyro, .5);\n  // radians per second\n  Sk.sense_hat.rtimu.gyro = [_gyro[0], _gyro[1], _gyro[2]];\n\n  // _compass = perturb(_compass, .01);\n  // multiply with 100 -> from Gauss to microteslas (µT)\n  Sk.sense_hat.rtimu.compass = [\n    _compass[0] * 100,\n    _compass[1] * 100,\n    _compass[2] * 100,\n  ];\n}\n\nwindow.rotatemodel = function (x, y, z) {\n  window.mod.rotation.x = x;\n  window.mod.rotation.y = y;\n  window.mod.rotation.z = z;\n};\n\nexport function resetModel(event) {\n  event.preventDefault();\n\n  var x = 0,\n    y = 0,\n    z = 0;\n  window.rotatemodel(\n    Geometry.degToRad(x),\n    Geometry.degToRad(y),\n    Geometry.degToRad(z),\n  );\n}\n\nexport function extractRollPitchYaw(x, y, z) {\n  const roll = ((y * 180) / Math.PI + 360) % 360;\n  const pitch = ((x * 180) / Math.PI + 90 + 360) % 360;\n  const yaw = ((z * 180) / Math.PI + 360) % 360;\n  return [roll, pitch, yaw];\n}\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgHumidity(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 20,\n    viewBox: \"0 0 16 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5 16c.417 0 .77-.146 1.062-.438.292-.291.438-.645.438-1.062 0-.417-.146-.77-.438-1.062A1.444 1.444 0 0010.5 13c-.417 0-.77.146-1.062.438A1.444 1.444 0 009 14.5c0 .417.146.77.438 1.062.291.292.645.438 1.062.438zm-5.05-.05l6.5-6.5-1.4-1.4-6.5 6.5 1.4 1.4zM5.5 11c.417 0 .77-.146 1.062-.438C6.854 10.271 7 9.917 7 9.5c0-.417-.146-.77-.438-1.062A1.444 1.444 0 005.5 8c-.417 0-.77.146-1.062.438A1.444 1.444 0 004 9.5c0 .417.146.77.438 1.062.291.292.645.438 1.062.438zM8 20c-2.283 0-4.187-.783-5.712-2.35C.763 16.083 0 14.133 0 11.8c0-1.667.663-3.479 1.988-5.437C3.313 4.404 5.317 2.283 8 0c2.683 2.283 4.688 4.404 6.013 6.363C15.338 8.321 16 10.133 16 11.8c0 2.333-.763 4.283-2.288 5.85C12.187 19.217 10.283 20 8 20zm0-2c1.733 0 3.167-.587 4.3-1.762S14 13.583 14 11.8c0-1.217-.504-2.592-1.512-4.125C11.479 6.142 9.983 4.467 8 2.65 6.017 4.467 4.521 6.142 3.513 7.675 2.504 9.208 2 10.583 2 11.8c0 1.783.567 3.263 1.7 4.438C4.833 17.413 6.267 18 8 18z\"\n  })));\n}\nexport default SvgHumidity;","import React from \"react\";\nimport * as THREE from \"three\";\nimport { useGLTF } from \"@react-three/drei\";\nimport Sk from \"skulpt\";\nimport { invalidate } from \"@react-three/fiber\";\n\nconst FlightCase = () => {\n  const { scene } = useGLTF(\n    `${process.env.PUBLIC_URL}/models/raspi-compressed.glb`,\n  );\n  window.mod = scene;\n\n  const blankLED = new THREE.MeshStandardMaterial({ color: `rgb(0,0,0)` });\n  var leds = {\n    \"0_0_0\": blankLED,\n  };\n\n  function setPixel(ledIndex, r, g, b) {\n    var x = ledIndex % 8;\n    var y = Math.floor(ledIndex / 8);\n    let ledMaterial;\n    if (`${r}_${g}_${b}` in leds) {\n      ledMaterial = leds[`${r}_${g}_${b}`];\n    } else {\n      ledMaterial = new THREE.MeshStandardMaterial({\n        color: `rgb(${r},${g},${b})`,\n      });\n      leds[`${r}_${g}_${b}`] = ledMaterial;\n    }\n    var object = scene.getObjectByName(`circle${x}_${7 - y}-1`);\n\n    if (object != null) {\n      object.material = ledMaterial;\n    }\n  }\n\n  function setPixels(indexes, pix) {\n    if (indexes == null) {\n      indexes = Array.from(Array(8 * 8).keys());\n    }\n\n    var i = 0;\n    for (const ledIndex of indexes) {\n      setPixel(ledIndex, pix[i][0], pix[i][1], pix[i][2]);\n      i += 1;\n    }\n  }\n\n  Sk.sense_hat_emit = function (event, data) {\n    if (event && event === \"setpixel\") {\n      // change the led\n      const ledIndex = data;\n      const ledData = Sk.sense_hat.pixels[ledIndex];\n\n      // Convert LED-RGB to RGB565 // and then to RGB555\n      Sk.sense_hat.pixels[ledIndex] = [\n        ledData[0] & ~7,\n        ledData[1] & ~3,\n        ledData[2] & ~7,\n      ];\n\n      setPixel(\n        ledIndex,\n        parseInt(ledData[0] * 255),\n        parseInt(ledData[1] * 255),\n        parseInt(ledData[2] * 255),\n      );\n    } else if (event && event === \"setpixels\") {\n      setPixels(data, Sk.sense_hat.pixels);\n    }\n    invalidate();\n  };\n\n  return <primitive object={scene} scale={4} />;\n};\n\nexport default FlightCase;\n","import React from \"react\";\nimport * as THREE from \"three\";\nimport { ResizeObserver } from \"@juggle/resize-observer\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport Lighting from \"./Lighting\";\nimport { Suspense } from \"react\";\n\nimport { extractRollPitchYaw } from \"../../utils/Orientation\";\nimport FlightCase from \"./FlightCase\";\nimport \"../../assets/stylesheets/AstroPiModel.scss\";\n\nvar isDragging = false;\nvar targetRotationX = 0.5;\nvar targetRotationY = 0.2;\nvar mouseX = 0;\nvar mouseXOnMouseDown = 0;\nvar mouseY = 0;\nvar mouseYOnMouseDown = 0;\nvar windowHalfX = window.innerWidth / 2;\nvar windowHalfY = window.innerHeight / 2;\nvar slowingFactor = 0.25;\nconst rotationScaleFactor = 0.00025;\n\nconst Simulator = (props) => {\n  const { updateOrientation } = props;\n\n  const handleDragStart = (e) => {\n    isDragging = true;\n    mouseXOnMouseDown = e.clientX - windowHalfX;\n    mouseYOnMouseDown = e.clientY - windowHalfY;\n  };\n  const handleDragStop = () => {\n    isDragging = false;\n  };\n\n  const dragModel = (e) => {\n    mouseX = e.clientX - windowHalfX;\n    targetRotationX = (mouseX - mouseXOnMouseDown) * rotationScaleFactor;\n    mouseY = e.clientY - windowHalfY;\n    targetRotationY = (mouseY - mouseYOnMouseDown) * rotationScaleFactor;\n\n    if (isDragging) {\n      window.mod.rotateOnWorldAxis(\n        new THREE.Vector3(0, 0, -1),\n        targetRotationX,\n      );\n      window.mod.rotateOnWorldAxis(new THREE.Vector3(1, 0, 0), targetRotationY);\n      updateOrientation(\n        extractRollPitchYaw(\n          window.mod.rotation.x,\n          window.mod.rotation.y,\n          window.mod.rotation.z,\n        ),\n      );\n      targetRotationY = targetRotationY * (1 - slowingFactor);\n      targetRotationX = targetRotationX * (1 - slowingFactor);\n    }\n  };\n\n  return (\n    <Canvas\n      frameloop=\"demand\"\n      onPointerDown={handleDragStart}\n      onPointerUp={handleDragStop}\n      onPointerOut={handleDragStop}\n      onPointerMove={dragModel}\n      resize={{ polyfill: ResizeObserver }}\n    >\n      <Lighting />\n      <Suspense fallback={null}>\n        <PerspectiveCamera\n          makeDefault\n          fov={25}\n          near={1}\n          far={20000}\n          position={[0, 1.5, 0]}\n        />\n        <FlightCase />\n        <OrbitControls\n          enableRotate={false}\n          enablePan={false}\n          enableZoom={false}\n          enabled={false}\n        />\n      </Suspense>\n    </Canvas>\n  );\n};\n\nexport default Simulator;\n","import React from \"react\";\nimport { useEffect, useState, startTransition } from \"react\";\nimport Sk from \"skulpt\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\n\nconst Input = (props) => {\n  const { name, label, type, defaultValue } = props;\n  const [value, setValue] = useState(defaultValue);\n\n  useEffect(() => {\n    if (Sk.sense_hat) {\n      startTransition(() => {\n        Sk.sense_hat[name] = value;\n      });\n    }\n  }, [name, value]);\n\n  return (\n    <div className=\"sense-hat-controls-panel__container\">\n      <label\n        className=\"sense-hat-controls-panel__control-name\"\n        htmlFor={`sense_hat_${name}`}\n      >\n        {label}\n      </label>\n      <input\n        type={type}\n        id={`sense_hat_${name}`}\n        defaultValue={value}\n        onChange={(e) => setValue(e.target.value)}\n      />\n    </div>\n  );\n};\n\nexport default Input;\n","import React from \"react\";\nimport { useEffect, useState, startTransition } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Toggle from \"react-toggle\";\nimport Sk from \"skulpt\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\nimport \"react-toggle/style.css\";\nimport { useTranslation } from \"react-i18next\";\n\nconst MotionInput = (props) => {\n  const { defaultValue } = props;\n  const [value, setValue] = useState(defaultValue);\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (!codeRunTriggered) {\n      Sk.sense_hat.start_motion_callback = () => {};\n      Sk.sense_hat.stop_motion_callback = () => {};\n    }\n  }, [codeRunTriggered]);\n\n  useEffect(() => {\n    if (Sk.sense_hat) {\n      startTransition(() => {\n        Sk.sense_hat.motion = value;\n      });\n    }\n    value\n      ? Sk.sense_hat.start_motion_callback()\n      : Sk.sense_hat.stop_motion_callback();\n  }, [value]);\n\n  return (\n    <div className=\"sense-hat-controls-panel__container\">\n      <label\n        className=\"sense-hat-controls-panel__control-name\"\n        htmlFor={`sense_hat_motion`}\n      >\n        {t(\"output.senseHat.controls.motion\")}\n      </label>\n      <div className=\"sense-hat-controls-panel__control-toggle\">\n        <label htmlFor={`sense_hat_motion`}>\n          {t(\"output.senseHat.controls.motionSensorOptions.no\")}\n        </label>\n        <Toggle\n          id=\"sense_hat_motion\"\n          icons={false}\n          checked={value}\n          onChange={(e) => setValue(e.target.checked)}\n        />\n        <label htmlFor={`sense_hat_motion`}>\n          {t(\"output.senseHat.controls.motionSensorOptions.yes\")}\n        </label>\n      </div>\n    </div>\n  );\n};\n\nexport default MotionInput;\n","import React from \"react\";\nimport { useEffect, useState, startTransition } from \"react\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\nimport Sk from \"skulpt\";\n\nconst SliderInput = (props) => {\n  const { name, label, unit, min, max, defaultValue, Icon } = props;\n  const [value, setValue] = useState(defaultValue);\n\n  useEffect(() => {\n    if (Sk.sense_hat) {\n      startTransition(() => {\n        Sk.sense_hat.rtimu[name][1] = value + Math.random() - 0.5;\n      });\n    }\n  }, [name, value]);\n\n  return (\n    <div className=\"sense-hat-controls-panel__control\">\n      <label\n        className=\"sense-hat-controls-panel__control-name\"\n        htmlFor={`sense_hat_${name}`}\n      >\n        {label}\n      </label>\n      <input\n        id={`sense_hat_${name}`}\n        className=\"sense-hat-controls-panel__control-input\"\n        type=\"range\"\n        min={min}\n        max={max}\n        step=\"1\"\n        defaultValue={value}\n        onChange={(e) => setValue(parseFloat(e.target.value))}\n      />\n      <div className=\"sense-hat-controls-panel__control-reading\">\n        {Icon ? <Icon /> : null}\n        <span className=\"sense-hat-controls-panel__control-value\">\n          {value}\n          {unit}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default SliderInput;\n","import React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useSelector } from \"react-redux\";\nimport { useStopwatch } from \"react-timer-hook\";\nimport Sk from \"skulpt\";\n\nconst Stopwatch = () => {\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const { seconds, minutes, isRunning, pause, reset } = useStopwatch({\n    autoStart: false,\n  });\n  const [hasLostFocus, setHasLostFocus] = useState(false);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    window.addEventListener(\"blur\", () => {\n      setHasLostFocus(true);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (codeRunTriggered && !isRunning) {\n      setHasLostFocus(false);\n      reset();\n    }\n    if (!codeRunTriggered && isRunning) {\n      pause();\n      Sk.sense_hat.mz_criteria.duration = hasLostFocus\n        ? null\n        : minutes * 60 + seconds;\n    }\n  }, [\n    codeRunTriggered,\n    hasLostFocus,\n    minutes,\n    seconds,\n    isRunning,\n    pause,\n    reset,\n  ]);\n\n  return (\n    <div className=\"sense-hat-controls-panel__container sense-hat-controls-panel__container-timer\">\n      <label\n        className=\"sense-hat-controls-panel__control-name\"\n        htmlFor=\"sense_hat_timer\"\n      >\n        {t(\"output.senseHat.controls.timer\")}\n      </label>\n      <span\n        className=\"sense-hat-controls-panel__control-reading sense-hat-controls-panel__control-reading-timer\"\n        id=\"sense_hat_timer\"\n      >\n        <span>{String(minutes).padStart(2, \"0\")}</span>:\n        <span>{String(seconds).padStart(2, \"0\")}</span>\n      </span>\n    </div>\n  );\n};\n\nexport default Stopwatch;\n","var _path, _path2, _path3;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgPressure(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    transform: \"scale(1.6)\",\n    width: 15,\n    height: 15,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.752 7.001a1 1 0 01-1.971.237c-.062-.252-.123-.52-.307-.704L5.411 5.471a.5.5 0 11.707-.707l.957.957c.207.207.52.25.81.29a1 1 0 01.867.99z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.75 6.75a4.25 4.25 0 11-8.5 0 4.25 4.25 0 018.5 0zm-1 0a3.25 3.25 0 11-6.5 0 3.25 3.25 0 016.5 0z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.252 10.5h2.5v.75a1.25 1.25 0 11-2.5 0z\"\n  })));\n}\nexport default SvgPressure;","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgTemperature(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 10,\n    height: 20,\n    viewBox: \"0 0 10 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5 20c-1.383 0-2.562-.487-3.537-1.462C.488 17.563 0 16.383 0 15c0-.8.175-1.546.525-2.238A5.083 5.083 0 012 11V3c0-.833.292-1.542.875-2.125A2.893 2.893 0 015 0c.833 0 1.542.292 2.125.875S8 2.167 8 3v8a5.083 5.083 0 011.475 1.762C9.825 13.454 10 14.2 10 15c0 1.383-.487 2.563-1.462 3.538C7.563 19.513 6.383 20 5 20zM4 9h2V8H5V7h1V5H5V4h1V3a.97.97 0 00-.287-.713A.97.97 0 005 2a.967.967 0 00-.712.287A.968.968 0 004 3v6z\"\n  })));\n}\nexport default SvgTemperature;","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgReset(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 0h6v2h-2.75l.4.35c.817.817 1.413 1.704 1.788 2.662.375.959.562 1.938.562 2.938 0 1.85-.554 3.496-1.663 4.937-1.108 1.442-2.554 2.396-4.337 2.863v-2.1a5.93 5.93 0 002.9-2.212A5.92 5.92 0 0014 7.95c0-.75-.142-1.48-.425-2.188-.283-.708-.725-1.362-1.325-1.962L12 3.55V6h-2V0zM6 16H0v-2h2.75l-.4-.35c-.867-.767-1.475-1.642-1.825-2.625A8.816 8.816 0 010 8.05C0 6.2.554 4.554 1.662 3.112 2.771 1.671 4.217.717 6 .25v2.1a5.93 5.93 0 00-2.9 2.212A5.92 5.92 0 002 8.05c0 .75.142 1.479.425 2.187.283.709.725 1.363 1.325 1.963l.25.25V10h2v6z\"\n  })));\n}\nexport default SvgReset;","import React from \"react\";\nimport Input from \"./Input\";\nimport MotionInput from \"./MotionInput\";\nimport SliderInput from \"./SliderInput\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\nimport Stopwatch from \"./Stopwatch\";\nimport HumidityIcon from \"../../../assets/icons/humidity.svg\";\nimport PressureIcon from \"../../../assets/icons/pressure.svg\";\nimport TemperatureIcon from \"../../../assets/icons/temperature.svg\";\nimport { useTranslation } from \"react-i18next\";\n\nconst AstroPiControls = (props) => {\n  const { temperature, pressure, humidity, colour, motion } = props;\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"sense-hat-controls\">\n      <h2 className=\"sense-hat-controls-heading\">\n        {t(\"output.senseHat.controls.name\")}\n      </h2>\n      <div className=\"sense-hat-controls-panel\">\n        <div className=\"sense-hat-controls-panel__sliders\">\n          <SliderInput\n            name=\"temperature\"\n            label={t(\"output.senseHat.controls.temperature\")}\n            unit=\"°C\"\n            min={-40}\n            max={120}\n            defaultValue={temperature}\n            Icon={TemperatureIcon}\n          />\n          <SliderInput\n            name=\"pressure\"\n            label={t(\"output.senseHat.controls.pressure\")}\n            unit=\"hPa\"\n            min={260}\n            max={1260}\n            defaultValue={pressure}\n            Icon={PressureIcon}\n          />\n          <SliderInput\n            name=\"humidity\"\n            label={t(\"output.senseHat.controls.humidity\")}\n            unit=\"%\"\n            min={0}\n            max={100}\n            defaultValue={humidity}\n            Icon={HumidityIcon}\n          />\n        </div>\n\n        <div className=\"sense-hat-controls-panel__control sense-hat-controls-panel__control-last\">\n          <Input\n            name=\"colour\"\n            label={t(\"output.senseHat.controls.colour\")}\n            type=\"color\"\n            defaultValue={colour}\n          />\n          <MotionInput defaultValue={motion} />\n          <Stopwatch />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AstroPiControls;\n","import React from \"react\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\n\nconst OrientationReading = (props) => {\n  const { name, value } = props;\n\n  return (\n    <span className=\"sense-hat-model-orientation__reading\">\n      {name}: {Math.round(value)}\n    </span>\n  );\n};\n\nexport default OrientationReading;\n","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgSplitView(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.5 17.5V9.167h15V17.5h-15zm1.667-1.667h11.666v-5H4.167v5zM2.5 9.167V2.5h15v6.667h-15zm1.667 0h11.666v-5H4.167v5z\"\n  })));\n}\nexport default SvgSplitView;","import React from \"react\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\nimport ResetIcon from \"../../../assets/icons/reset.svg\";\n\nconst OrientationResetButton = (props) => {\n  const { resetOrientation } = props;\n\n  return (\n    <button onClick={(e) => resetOrientation(e)}>\n      <ResetIcon />\n    </button>\n  );\n};\n\nexport default OrientationResetButton;\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport \"../../../assets/stylesheets/AstroPiModel.scss\";\nimport OrientationReading from \"./OrientationReading\";\nimport OrientationResetButton from \"./OrientationResetButton\";\n\nconst OrientationPanel = (props) => {\n  const { t } = useTranslation();\n  const { orientation, resetOrientation } = props;\n\n  return (\n    <div className=\"sense-hat-model-orientation\">\n      <div className=\"sense-hat-model-orientation__spacing\"></div>\n      <div className=\"sense-hat-model-orientation__values\">\n        <OrientationReading\n          name={t(\"output.senseHat.model.roll\")}\n          value={orientation[0]}\n        />\n        <OrientationReading\n          name={t(\"output.senseHat.model.pitch\")}\n          value={orientation[1]}\n        />\n        <OrientationReading\n          name={t(\"output.senseHat.model.yaw\")}\n          value={orientation[2]}\n        />\n      </div>\n      <div className=\"sense-hat-model-orientation__reset-btn\">\n        <OrientationResetButton resetOrientation={resetOrientation} />\n      </div>\n    </div>\n  );\n};\n\nexport default OrientationPanel;\n","export const defaultMZCriteria = {\n  duration: null,\n  noInputEvents: true,\n  readColour: false,\n  readHumidity: false,\n  readPressure: false,\n  readTemperature: false,\n  usedLEDs: false,\n};\n","import React from \"react\";\nimport \"../../assets/stylesheets/AstroPiModel.scss\";\nimport Simulator from \"./Simulator\";\nimport Sk from \"skulpt\";\nimport AstroPiControls from \"./AstroPiControls/AstroPiControls\";\nimport OrientationPanel from \"./OrientationPanel/OrientationPanel\";\nimport { useEffect, useState } from \"react\";\nimport { resetModel, updateRTIMU } from \"../../utils/Orientation\";\nimport { useSelector } from \"react-redux\";\nimport { defaultMZCriteria } from \"../../utils/DefaultMZCriteria\";\n\nconst AstroPiModel = () => {\n  const project = useSelector((state) => state.editor.project);\n  const [orientation, setOrientation] = useState([0, 90, 0]);\n  const resetOrientation = (e) => {\n    resetModel(e);\n    setOrientation([0, 90, 0]);\n  };\n\n  const defaultPressure = 1013;\n  const defaultTemperature = 13;\n  const defaultHumidity = 45;\n\n  if (!Sk.sense_hat) {\n    Sk.sense_hat = {\n      colour: \"#FF00A4\",\n      gamma: [\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0,\n      ],\n      low_light: false,\n      motion: false,\n      mz_criteria: { ...defaultMZCriteria },\n      pixels: [],\n      rtimu: {\n        pressure: [\n          1,\n          defaultPressure + Math.random() - 0.5,\n        ] /* isValid, pressure*/,\n        temperature: [\n          1,\n          defaultTemperature + Math.random() - 0.5,\n        ] /* isValid, temperature */,\n        humidity: [\n          1,\n          defaultHumidity + Math.random() - 0.5,\n        ] /* isValid, humidity */,\n        gyro: [0, 0, 0] /* all 3 gyro values */,\n        accel: [0, 0, 0] /* all 3 accel values */,\n        compass: [0, 0, 33] /* all compass values */,\n        raw_orientation: [0, 90, 0],\n      },\n      sensestick: {\n        _eventQueue: [],\n        off: () => {},\n        once: () => {},\n      },\n      start_motion_callback: () => {},\n      stop_motion_callback: () => {},\n    };\n    for (var i = 0; i < 64; i++) {\n      Sk.sense_hat.pixels.push([0, 0, 0]);\n    }\n  }\n\n  useEffect(() => {\n    Sk.sense_hat.mz_criteria = { ...defaultMZCriteria };\n  }, [project]);\n\n  useEffect(() => {\n    Sk.sense_hat.rtimu.raw_orientation = orientation;\n    updateRTIMU();\n  }, [orientation]);\n\n  return (\n    <div className=\"sense-hat\">\n      <div className=\"sense-hat-model\">\n        <Simulator updateOrientation={setOrientation} />\n        <OrientationPanel\n          orientation={orientation}\n          resetOrientation={resetOrientation}\n        />\n      </div>\n\n      {/* <!-- Full sensor controls --> */}\n      <AstroPiControls\n        pressure={defaultPressure}\n        temperature={defaultTemperature}\n        humidity={defaultHumidity}\n        colour={Sk.sense_hat.colour}\n        motion={Sk.sense_hat.motion}\n      />\n    </div>\n  );\n};\n\nexport default AstroPiModel;\n","import React, { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Sk from \"skulpt\";\nimport AstroPiModel from \"../../../AstroPiModel/AstroPiModel\";\nimport { codeRunHandled, setError } from \"../../../../redux/EditorSlice\";\n\nconst VisualOutputPane = () => {\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const drawTriggered = useSelector((state) => state.editor.drawTriggered);\n  const senseHatAlwaysEnabled = useSelector(\n    (state) => state.editor.senseHatAlwaysEnabled,\n  );\n  const senseHatEnabled = useSelector((state) => state.editor.senseHatEnabled);\n  const projectImages = useSelector((state) => state.editor.project.image_list);\n  const error = useSelector((state) => state.editor.error);\n\n  const outputCanvas = useRef();\n  const pygalOutput = useRef();\n  const p5Output = useRef();\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (codeRunTriggered) {\n      outputCanvas.current.innerHTML = \"\";\n      pygalOutput.current.innerHTML = \"\";\n      p5Output.current.innerHTML = \"\";\n\n      Sk.py5 = {};\n      Sk.py5.sketch = \"p5Sketch\";\n      Sk.py5.assets = projectImages;\n\n      Sk.p5 = {};\n      Sk.p5.sketch = \"p5Sketch\";\n      Sk.p5.assets = projectImages;\n\n      (Sk.pygal || (Sk.pygal = {})).outputCanvas = pygalOutput.current;\n\n      (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = \"outputCanvas\";\n      Sk.TurtleGraphics.assets = Object.assign(\n        {},\n        ...projectImages.map((image) => ({\n          [`${image.name}.${image.extension}`]: image.url,\n        })),\n      );\n    }\n  }, [codeRunTriggered, projectImages]);\n\n  useEffect(() => {\n    if (\n      !drawTriggered &&\n      p5Output.current &&\n      p5Output.current.innerHTML !== \"\"\n    ) {\n      if (Sk.py5.stop) {\n        Sk.py5.stop();\n      } else {\n        Sk.p5.stop();\n      }\n\n      if (error === \"\") {\n        dispatch(setError(t(\"output.errors.interrupted\")));\n      }\n      dispatch(codeRunHandled());\n    }\n  }, [drawTriggered, dispatch, t, error]);\n\n  return (\n    <div className=\"visual-output\">\n      <div id=\"p5Sketch\" ref={p5Output} />\n      <div id=\"pygalOutput\" ref={pygalOutput} />\n      <div className=\"pythonrunner-canvas-container\">\n        <div\n          id=\"outputCanvas\"\n          ref={outputCanvas}\n          className=\"pythonrunner-graphic\"\n        />\n      </div>\n      {senseHatEnabled || senseHatAlwaysEnabled ? <AstroPiModel /> : null}\n    </div>\n  );\n};\n\nexport default VisualOutputPane;\n","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgTabbedView(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.5 17.5v-15h-15v15h15zm-1.667-1.667H4.167V9.167h11.666v6.666zm0-8.333H4.167V4.167h11.666V7.5zm-7.5-.833H5V5h3.333v1.667z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.167 6.667H12.5V5H9.167v1.667z\"\n  })));\n}\nexport default SvgTabbedView;","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport SplitViewIcon from \"../../../../assets/icons/split_view.svg\";\nimport TabbedViewIcon from \"../../../../assets/icons/tabbed_view.svg\";\nimport Button from \"../../../Button/Button\";\nimport { setIsSplitView } from \"../../../../redux/EditorSlice\";\nimport { useMediaQuery } from \"react-responsive\";\n\nimport { useTranslation } from \"react-i18next\";\n\nimport \"../../../../assets/stylesheets/OutputViewToggle.scss\";\nimport { MOBILE_MEDIA_QUERY } from \"../../../../utils/mediaQueryBreakpoints\";\n\nconst OutputViewToggle = () => {\n  const isSplitView = useSelector((state) => state.editor.isSplitView);\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const drawTriggered = useSelector((state) => state.editor.drawTriggered);\n  const isMobile = useMediaQuery({ query: MOBILE_MEDIA_QUERY });\n\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const switchToTabbedView = () => {\n    dispatch(setIsSplitView(false));\n  };\n\n  const switchToSplitView = () => {\n    dispatch(setIsSplitView(true));\n  };\n\n  return (\n    <div className=\"output-view-toggle\">\n      <Button\n        className={\"btn--tertiary output-view-toggle__button\"}\n        buttonText={\n          isMobile\n            ? null\n            : isSplitView\n            ? t(\"outputViewToggle.buttonTabLabel\")\n            : t(\"outputViewToggle.buttonSplitLabel\")\n        }\n        disabled={codeRunTriggered || drawTriggered}\n        label={\n          isSplitView\n            ? t(\"outputViewToggle.buttonTabLabel\")\n            : t(\"outputViewToggle.buttonSplitLabel\")\n        }\n        title={\n          isSplitView\n            ? t(\"outputViewToggle.buttonTabTitle\")\n            : t(\"outputViewToggle.buttonSplitTitle\")\n        }\n        ButtonIcon={isSplitView ? TabbedViewIcon : SplitViewIcon}\n        buttonIconPosition=\"right\"\n        onClickHandler={isSplitView ? switchToTabbedView : switchToSplitView}\n      />\n    </div>\n  );\n};\n\nexport default OutputViewToggle;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport \"../../../../assets/stylesheets/PythonRunner.scss\";\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { Tab, Tabs, TabList, TabPanel } from \"react-tabs\";\nimport Sk from \"skulpt\";\nimport { useMediaQuery } from \"react-responsive\";\nimport {\n  setError,\n  codeRunHandled,\n  stopDraw,\n  setSenseHatEnabled,\n  triggerDraw,\n} from \"../../../../redux/EditorSlice\";\nimport ErrorMessage from \"../../ErrorMessage/ErrorMessage\";\nimport { createError } from \"../../../../utils/apiCallHandler\";\nimport store from \"../../../../app/store\";\nimport VisualOutputPane from \"./VisualOutputPane\";\nimport OutputViewToggle from \"./OutputViewToggle\";\nimport { SettingsContext } from \"../../../../utils/settings\";\nimport RunnerControls from \"../../../RunButton/RunnerControls\";\nimport { MOBILE_MEDIA_QUERY } from \"../../../../utils/mediaQueryBreakpoints\";\n\nconst externalLibraries = {\n  \"./pygal/__init__.js\": {\n    path: `${process.env.PUBLIC_URL}/shims/pygal/pygal.js`,\n    dependencies: [\n      \"https://cdnjs.cloudflare.com/ajax/libs/highcharts/6.0.2/highcharts.js\",\n      \"https://cdnjs.cloudflare.com/ajax/libs/highcharts/6.0.2/js/highcharts-more.js\",\n    ],\n  },\n  \"./py5/__init__.js\": {\n    path: `${process.env.PUBLIC_URL}/shims/processing/py5/py5-shim.js`,\n    dependencies: [`${process.env.PUBLIC_URL}/libraries/processing/p5/p5.js`],\n  },\n  \"./py5_imported/__init__.js\": {\n    path: `${process.env.PUBLIC_URL}/shims/processing/py5_imported_mode/py5_imported.js`,\n  },\n  \"./py5_imported_mode.py\": {\n    path: `${process.env.PUBLIC_URL}/shims/processing/py5_imported_mode/py5_imported_mode.py`,\n  },\n  \"./p5/__init__.js\": {\n    path: `${process.env.PUBLIC_URL}/shims/processing/p5/p5-shim.js`,\n    dependencies: [`${process.env.PUBLIC_URL}/libraries/processing/p5/p5.js`],\n  },\n  \"./_internal_sense_hat/__init__.js\": {\n    path: `${process.env.PUBLIC_URL}/shims/sense_hat/_internal_sense_hat.js`,\n  },\n  \"./sense_hat.py\": {\n    path: `${process.env.PUBLIC_URL}/shims/sense_hat/sense_hat_blob.py`,\n  },\n};\n\nconst PythonRunner = () => {\n  const projectCode = useSelector((state) => state.editor.project.components);\n  const projectIdentifier = useSelector(\n    (state) => state.editor.project.identifier,\n  );\n  const user = useSelector((state) => state.auth.user);\n  const isSplitView = useSelector((state) => state.editor.isSplitView);\n  const isEmbedded = useSelector((state) => state.editor.isEmbedded);\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const codeRunStopped = useSelector((state) => state.editor.codeRunStopped);\n  const drawTriggered = useSelector((state) => state.editor.drawTriggered);\n  const senseHatAlwaysEnabled = useSelector(\n    (state) => state.editor.senseHatAlwaysEnabled,\n  );\n  const output = useRef();\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const settings = useContext(SettingsContext);\n  const isMobile = useMediaQuery({ query: MOBILE_MEDIA_QUERY });\n\n  const queryParams = new URLSearchParams(window.location.search);\n  const [hasVisualOutput, setHasVisualOutput] = useState(\n    queryParams.get(\"show_visual_tab\") === \"true\" || senseHatAlwaysEnabled,\n  );\n\n  const getInput = () => {\n    const pageInput = document.getElementById(\"input\");\n    const webComponentInput = document.querySelector(\"editor-wc\")\n      ? document.querySelector(\"editor-wc\").shadowRoot.getElementById(\"input\")\n      : null;\n    return pageInput || webComponentInput;\n  };\n\n  useEffect(() => {\n    if (codeRunTriggered) {\n      runCode();\n    }\n  }, [codeRunTriggered]);\n\n  useEffect(() => {\n    if (codeRunStopped && getInput()) {\n      const input = getInput();\n      input.removeAttribute(\"id\");\n      input.removeAttribute(\"contentEditable\");\n      dispatch(setError(t(\"output.errors.interrupted\")));\n      dispatch(codeRunHandled());\n    }\n  }, [codeRunStopped]);\n\n  useEffect(() => {\n    if (!codeRunTriggered && !drawTriggered) {\n      if (getInput()) {\n        const input = getInput();\n        input.removeAttribute(\"id\");\n        input.removeAttribute(\"contentEditable\");\n      }\n    }\n  }, [drawTriggered, codeRunTriggered]);\n\n  const visualLibraries = [\n    \"./pygal/__init__.js\",\n    \"./py5/__init__.js\",\n    \"./py5_imported/__init__.js\",\n    \"./p5/__init__.js\",\n    \"./_internal_sense_hat/__init__.js\",\n    \"src/builtin/turtle/__init__.js\",\n  ];\n\n  const outf = (text) => {\n    if (text !== \"\") {\n      const node = output.current;\n      const div = document.createElement(\"span\");\n      div.classList.add(\"pythonrunner-console-output-line\");\n      div.innerHTML = new Option(text).innerHTML;\n      node.appendChild(div);\n      node.scrollTop = node.scrollHeight;\n    }\n  };\n\n  const builtinRead = (library) => {\n    if (library === \"./_internal_sense_hat/__init__.js\") {\n      dispatch(setSenseHatEnabled(true));\n    }\n\n    if (library === \"./p5/__init__.js\" || library === \"./py5/__init__.js\") {\n      dispatch(triggerDraw());\n    }\n\n    // TODO: Handle pre-importing py5_imported when refactored py5 shim imported\n\n    if (visualLibraries.includes(library)) {\n      setHasVisualOutput(true);\n    }\n\n    let localProjectFiles = projectCode\n      .filter((component) => component.name !== \"main\")\n      .map((component) => `./${component.name}.py`);\n\n    if (localProjectFiles.includes(library)) {\n      let filename = library.slice(2, -3);\n      let component = projectCode.find((x) => x.name === filename);\n      if (component) {\n        return component.content;\n      }\n    }\n\n    if (\n      Sk.builtinFiles !== undefined &&\n      Sk.builtinFiles[\"files\"][library] !== undefined\n    ) {\n      return Sk.builtinFiles[\"files\"][library];\n    }\n\n    if (externalLibraries[library]) {\n      var externalLibraryInfo = externalLibraries[library];\n\n      return (\n        externalLibraries[library].code ||\n        Sk.misceval.promiseToSuspension(\n          fetch(externalLibraryInfo.path)\n            .then((response) => response.text())\n            .then((code) => {\n              if (!code) {\n                throw new Sk.builtin.ImportError(\n                  \"Failed to load remote module\",\n                );\n              }\n              externalLibraries[library].code = code;\n              var promise;\n\n              function mapUrlToPromise(path) {\n                // If the script is already in the DOM don't add it again.\n                const existingScriptElement = document.querySelector(\n                  `script[src=\"${path}\"]`,\n                );\n                if (!existingScriptElement) {\n                  return new Promise(function (resolve, _reject) {\n                    let scriptElement = document.createElement(\"script\");\n                    scriptElement.type = \"text/javascript\";\n                    scriptElement.src = path;\n                    scriptElement.async = true;\n                    scriptElement.onload = function () {\n                      resolve(true);\n                    };\n\n                    document.body.appendChild(scriptElement);\n                  });\n                }\n              }\n              if (externalLibraryInfo.loadDepsSynchronously) {\n                promise = (externalLibraryInfo.dependencies || []).reduce(\n                  (p, url) => {\n                    return p.then(() => mapUrlToPromise(url));\n                  },\n                  Promise.resolve(),\n                ); // initial\n              } else {\n                promise = Promise.all(\n                  (externalLibraryInfo.dependencies || []).map(mapUrlToPromise),\n                );\n              }\n\n              return promise\n                .then(function () {\n                  return code;\n                })\n                .catch(function () {\n                  throw new Sk.builtin.ImportError(\n                    \"Failed to load dependencies required\",\n                  );\n                });\n            }),\n        )\n      );\n    }\n\n    throw new Error(\"File not found: '\" + library + \"'\");\n  };\n\n  const inputSpan = () => {\n    const span = document.createElement(\"span\");\n    span.setAttribute(\"id\", \"input\");\n    span.setAttribute(\"spellCheck\", \"false\");\n    span.setAttribute(\"class\", \"pythonrunner-input\");\n    span.setAttribute(\"contentEditable\", \"true\");\n    return span;\n  };\n\n  const inf = function () {\n    if (Sk.sense_hat) {\n      Sk.sense_hat.mz_criteria.noInputEvents = false;\n    }\n    const outputPane = output.current;\n    outputPane.appendChild(inputSpan());\n\n    const input = getInput();\n    input.focus();\n\n    return new Promise(function (resolve, reject) {\n      input.addEventListener(\"keydown\", function removeInput(e) {\n        if (e.key === \"Enter\") {\n          input.removeEventListener(e.type, removeInput);\n          // resolve the promise with the value of the input field\n          const answer = input.innerText;\n          input.removeAttribute(\"id\");\n          input.removeAttribute(\"contentEditable\");\n          input.innerText = answer + \"\\n\";\n\n          document.addEventListener(\"keyup\", function storeInput(e) {\n            if (e.key === \"Enter\") {\n              document.removeEventListener(e.type, storeInput);\n              resolve(answer);\n            }\n          });\n        }\n      });\n    });\n  };\n\n  const handleError = (err) => {\n    let errorMessage;\n    if (err.message === t(\"output.errors.interrupted\")) {\n      errorMessage = err.message;\n    } else {\n      const errorDetails = (err.tp$str && err.tp$str().v)\n        .replace(/\\[(.*?)\\]/, \"\")\n        .replace(/\\.$/, \"\");\n      const errorType = err.tp$name || err.constructor.name;\n      const lineNumber = err.traceback[0].lineno;\n      const fileName = err.traceback[0].filename.replace(/^\\.\\//, \"\");\n\n      let userId;\n      if (user?.profile) {\n        userId = user.profile?.user;\n      }\n\n      errorMessage = `${errorType}: ${errorDetails} on line ${lineNumber} of ${fileName}`;\n      createError(projectIdentifier, userId, {\n        errorType,\n        errorMessage,\n      });\n    }\n\n    dispatch(setError(errorMessage));\n    dispatch(stopDraw());\n    if (getInput()) {\n      const input = getInput();\n      input.removeAttribute(\"id\");\n      input.removeAttribute(\"contentEditable\");\n    }\n  };\n\n  const runCode = () => {\n    // clear previous output\n    dispatch(setError(\"\"));\n    output.current.innerHTML = \"\";\n    dispatch(setSenseHatEnabled(false));\n\n    var prog = projectCode[0].content;\n\n    if (prog.includes(`# ${t(\"input.comment.py5\")}`)) {\n      prog = prog.replace(\n        `# ${t(\"input.comment.py5\")}`,\n        \"from py5_imported_mode import *\",\n      );\n\n      if (!prog.match(/(\\nrun_sketch)/)) {\n        prog = prog.concat(\"\\nrun_sketch()\");\n      }\n    }\n\n    Sk.configure({\n      inputfun: inf,\n      output: outf,\n      read: builtinRead,\n      debugging: true,\n      inputTakesPrompt: true,\n      uncaughtException: handleError,\n    });\n\n    var myPromise = Sk.misceval\n      .asyncToPromise(() => Sk.importMainWithBody(\"main\", false, prog, true), {\n        \"*\": () => {\n          if (store.getState().editor.codeRunStopped) {\n            throw new Error(t(\"output.errors.interrupted\"));\n          }\n        },\n      })\n      .catch((err) => {\n        handleError(err);\n      })\n      .finally(() => {\n        dispatch(codeRunHandled());\n      });\n    myPromise.then(function (_mod) {});\n  };\n\n  function shiftFocusToInput(e) {\n    if (document.getSelection().toString().length > 0) {\n      return;\n    }\n\n    const inputBox = getInput();\n    if (inputBox && e.target !== inputBox) {\n      const input = getInput();\n      const selection = window.getSelection();\n      selection.removeAllRanges();\n\n      if (input.innerText && input.innerText.length > 0) {\n        const range = document.createRange();\n        range.setStart(input, 1);\n        range.collapse(true);\n        selection.addRange(range);\n      }\n      input.focus();\n    }\n  }\n\n  return (\n    <div className={`pythonrunner-container`}>\n      {isSplitView ? (\n        <>\n          {hasVisualOutput ? (\n            <div className=\"output-panel output-panel--visual\">\n              <Tabs forceRenderTabPanel={true}>\n                <div className=\"react-tabs__tab-container\">\n                  <TabList>\n                    <Tab key={0}>\n                      <span className=\"react-tabs__tab-text\">\n                        {t(\"output.visualOutput\")}\n                      </span>\n                    </Tab>\n                  </TabList>\n                  {!isEmbedded && hasVisualOutput ? <OutputViewToggle /> : null}\n                  {!isEmbedded && isMobile ? <RunnerControls skinny /> : null}\n                </div>\n                <TabPanel key={0}>\n                  <VisualOutputPane />\n                </TabPanel>\n              </Tabs>\n            </div>\n          ) : null}\n          <div className=\"output-panel output-panel--text\">\n            <Tabs forceRenderTabPanel={true}>\n              <div className=\"react-tabs__tab-container\">\n                <TabList>\n                  <Tab key={0}>\n                    <span className=\"react-tabs__tab-text\">\n                      {t(\"output.textOutput\")}\n                    </span>\n                  </Tab>\n                </TabList>\n                {!hasVisualOutput && !isEmbedded && isMobile ? (\n                  <RunnerControls skinny />\n                ) : null}\n              </div>\n              <ErrorMessage />\n              <TabPanel key={0}>\n                <pre\n                  className={`pythonrunner-console pythonrunner-console--${settings.fontSize}`}\n                  onClick={shiftFocusToInput}\n                  ref={output}\n                ></pre>\n              </TabPanel>\n            </Tabs>\n          </div>\n        </>\n      ) : (\n        <Tabs forceRenderTabPanel={true} defaultIndex={hasVisualOutput ? 0 : 1}>\n          <div className=\"react-tabs__tab-container\">\n            <TabList>\n              {hasVisualOutput ? (\n                <Tab key={0}>\n                  <span className=\"react-tabs__tab-text\">\n                    {t(\"output.visualOutput\")}\n                  </span>\n                </Tab>\n              ) : null}\n              <Tab key={1}>\n                <span className=\"react-tabs__tab-text\">\n                  {t(\"output.textOutput\")}\n                </span>\n              </Tab>\n            </TabList>\n            {!isEmbedded && hasVisualOutput ? <OutputViewToggle /> : null}\n            {!isEmbedded && isMobile ? <RunnerControls skinny /> : null}\n          </div>\n          <ErrorMessage />\n          {hasVisualOutput ? (\n            <TabPanel key={0}>\n              <VisualOutputPane />\n            </TabPanel>\n          ) : null}\n          <TabPanel key={1}>\n            <pre\n              className={`pythonrunner-console pythonrunner-console--${settings.fontSize}`}\n              onClick={shiftFocusToInput}\n              ref={output}\n            ></pre>\n          </TabPanel>\n        </Tabs>\n      )}\n    </div>\n  );\n};\n\nexport default PythonRunner;\n","import React from \"react\";\nimport Modal from \"react-modal\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"../Button/Button\";\nimport { closeErrorModal } from \"../../redux/EditorSlice\";\nimport \"../../assets/stylesheets/Modal.scss\";\n\nconst ErrorModal = ({ errorType, additionalOnClose }) => {\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const isModalOpen = useSelector((state) => state.editor.errorModalShowing);\n  const closeModal = () => {\n    dispatch(closeErrorModal());\n    if (additionalOnClose) {\n      additionalOnClose();\n    }\n  };\n\n  return (\n    <>\n      <Modal\n        isOpen={isModalOpen}\n        onRequestClose={closeModal}\n        className=\"modal-content\"\n        overlayClassName=\"modal-overlay\"\n        contentLabel=\"Error\"\n        parentSelector={() => document.querySelector(\"#app\")}\n        appElement={document.getElementById(\"app\") || undefined}\n      >\n        <div className=\"modal-content__header\">\n          <h2 className=\"modal-content__heading\">{t(\"modal.error.heading\")}</h2>\n        </div>\n\n        {t(`modal.error.${errorType}.message`, { defaultValue: null }) && (\n          <div className=\"modal-content__body\">\n            <p className=\"modal-content__text\">\n              {t(`modal.error.${errorType}.message`)}\n            </p>\n          </div>\n        )}\n\n        <div className=\"modal-content__buttons\">\n          <Button\n            className=\"btn--primary\"\n            buttonText={t(\"modal.close\")}\n            onClickHandler={closeModal}\n          />\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nErrorModal.propTypes = {\n  errorType: PropTypes.string,\n  closeModal: PropTypes.func,\n};\n\nexport default ErrorModal;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport \"../../../../assets/stylesheets/HtmlRunner.scss\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { parse } from \"node-html-parser\";\nimport { useMediaQuery } from \"react-responsive\";\n\nimport ErrorModal from \"../../../Modals/ErrorModal\";\nimport {\n  showErrorModal,\n  codeRunHandled,\n  triggerCodeRun,\n} from \"../../../../redux/EditorSlice\";\nimport { useTranslation } from \"react-i18next\";\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\nimport { useSearchParams } from \"react-router-dom\";\nimport RunnerControls from \"../../../RunButton/RunnerControls\";\nimport { MOBILE_MEDIA_QUERY } from \"../../../../utils/mediaQueryBreakpoints\";\n\nfunction HtmlRunner() {\n  const project = useSelector((state) => state.editor.project);\n  const projectCode = project.components;\n  const projectImages = project.image_list;\n\n  const firstPanelIndex = 0;\n  const focussedFileIndex = useSelector(\n    (state) => state.editor.focussedFileIndices,\n  )[firstPanelIndex];\n  const openFiles = useSelector((state) => state.editor.openFiles)[\n    firstPanelIndex\n  ];\n  const codeRunTriggered = useSelector(\n    (state) => state.editor.codeRunTriggered,\n  );\n  const justLoaded = useSelector((state) => state.editor.justLoaded);\n  const isEmbedded = useSelector((state) => state.editor.isEmbedded);\n  const autorunEnabled = useSelector((state) => state.editor.autorunEnabled);\n  const codeHasBeenRun = useSelector((state) => state.editor.codeHasBeenRun);\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { t, i18n } = useTranslation();\n  const locale = i18n.language;\n\n  const dispatch = useDispatch();\n  const output = useRef(null);\n  const [error, setError] = useState(null);\n  const domain = `https://rpf.io/`;\n  const rpfDomain = new RegExp(`^${domain}`);\n  const allowedInternalLinks = [new RegExp(`^#[a-zA-Z0-9]+`)];\n  const allowedExternalHrefs = [rpfDomain];\n\n  const matchingRegexes = (regexArray, testString) => {\n    return regexArray.some((reg) => reg.test(testString));\n  };\n\n  const isMobile = useMediaQuery({ query: MOBILE_MEDIA_QUERY });\n\n  const focussedComponent = (fileName = \"index.html\") =>\n    projectCode.filter(\n      (component) => `${component.name}.${component.extension}` === fileName,\n    )[0];\n\n  const previewable = (file) => file.endsWith(\".html\");\n  let defaultPreviewFile;\n\n  if (\n    isEmbedded &&\n    searchParams.get(\"browserPreview\") === \"true\" &&\n    searchParams.get(\"page\") &&\n    previewable(searchParams.get(\"page\"))\n  ) {\n    defaultPreviewFile = searchParams.get(\"page\");\n  } else if (!isEmbedded && previewable(openFiles[focussedFileIndex])) {\n    defaultPreviewFile = openFiles[focussedFileIndex];\n  } else {\n    defaultPreviewFile = \"index.html\";\n  }\n\n  const [previewFile, setPreviewFile] = useState(defaultPreviewFile);\n  const [runningFile, setRunningFile] = useState(previewFile);\n  const [externalLink, setExternalLink] = useState();\n\n  const showModal = () => {\n    dispatch(showErrorModal());\n  };\n\n  const closeModal = () => setError(null);\n\n  const getBlobURL = (code, type) => {\n    const blob = new Blob([code], { type });\n    return URL.createObjectURL(blob);\n  };\n\n  const getFilename = (iframe) => {\n    let filename;\n    if (iframe) {\n      filename = iframe.querySelectorAll(\"meta[filename]\")[0]\n        ? iframe.querySelectorAll(\"meta[filename]\")[0].getAttribute(\"filename\")\n        : externalLink;\n    } else {\n      filename = externalLink;\n    }\n    return filename;\n  };\n\n  const cssProjectImgs = (projectFile) => {\n    var updatedProjectFile = { ...projectFile };\n    if (projectFile.extension === \"css\") {\n      projectImages.forEach((image) => {\n        updatedProjectFile.content = updatedProjectFile.content.replace(\n          image.filename,\n          image.url,\n        );\n      });\n    }\n    return updatedProjectFile;\n  };\n\n  const parentTag = (node, tag) =>\n    node.parentNode?.tagName && node.parentNode.tagName.toLowerCase() === tag;\n\n  const eventListener = () => {\n    window.addEventListener(\"message\", (event) => {\n      if (typeof event.data?.msg === \"string\") {\n        if (event.data?.msg === \"ERROR: External link\") {\n          setError(\"externalLink\");\n        } else if (event.data?.msg === \"Allowed external link\") {\n          setExternalLink(event.data.payload.linkTo);\n          dispatch(triggerCodeRun());\n        } else {\n          setExternalLink(null);\n          setPreviewFile(`${event.data.payload.linkTo}.html`);\n          dispatch(triggerCodeRun());\n        }\n      }\n    });\n  };\n\n  const iframeReload = () => {\n    const iframe = output.current.contentDocument;\n    let filename = getFilename(iframe);\n\n    if (runningFile !== filename) {\n      setRunningFile(filename);\n    }\n\n    if (iframe) {\n      const linkElement = iframe.querySelector(\"a\");\n\n      if (linkElement) {\n        linkElement.addEventListener(\"click\", (e) => {\n          e.preventDefault();\n\n          output.current.contentDocument.href =\n            linkElement.getAttribute(\"href\");\n        });\n      }\n    }\n    setExternalLink(null);\n  };\n\n  useEffect(() => {\n    eventListener();\n  }, []);\n\n  let timeout;\n\n  useEffect(() => {\n    if (justLoaded && isEmbedded) {\n      dispatch(triggerCodeRun());\n    } else if (!justLoaded && autorunEnabled) {\n      timeout = setTimeout(() => {\n        dispatch(triggerCodeRun());\n      }, 2000);\n      return () => clearTimeout(timeout);\n    }\n  }, [previewFile]);\n\n  useEffect(() => {\n    if (codeRunTriggered) {\n      runCode();\n    }\n  }, [codeRunTriggered]);\n\n  useEffect(() => {\n    if (\n      !externalLink &&\n      !isEmbedded &&\n      previewable(openFiles[focussedFileIndex])\n    ) {\n      setPreviewFile(openFiles[focussedFileIndex]);\n    }\n  }, [focussedFileIndex, openFiles]);\n\n  useEffect(() => {\n    if (error) {\n      showModal();\n      eventListener();\n    }\n  }, [error]);\n\n  useEffect(() => {\n    if (isEmbedded && searchParams.get(\"browserPreview\") === \"true\") {\n      setSearchParams({\n        ...Object.fromEntries([...searchParams]),\n        page: runningFile,\n      });\n    }\n  }, [runningFile]);\n\n  const runCode = () => {\n    setRunningFile(previewFile);\n    if (!externalLink) {\n      let indexPage = parse(focussedComponent(previewFile).content);\n\n      const body = indexPage.querySelector(\"body\") || indexPage;\n\n      const hrefNodes = indexPage.querySelectorAll(\"[href]\");\n\n      // replace href's with blob urls\n      hrefNodes.forEach((hrefNode) => {\n        const projectFile = projectCode.filter(\n          (file) => `${file.name}.${file.extension}` === hrefNode.attrs.href,\n        );\n\n        // remove target blanks\n        if (hrefNode.attrs?.target === \"_blank\") {\n          hrefNode.removeAttribute(\"target\");\n        }\n\n        let onClick;\n\n        if (!!projectFile.length) {\n          if (parentTag(hrefNode, \"head\")) {\n            const projectFileBlob = getBlobURL(\n              cssProjectImgs(projectFile[0]).content,\n              `text/${projectFile[0].extension}`,\n            );\n            hrefNode.setAttribute(\"href\", projectFileBlob);\n          } else {\n            // eslint-disable-next-line no-script-url\n            hrefNode.setAttribute(\"href\", \"javascript:void(0)\");\n            onClick = `window.parent.postMessage({msg: 'RELOAD', payload: { linkTo: '${projectFile[0].name}' }})`;\n          }\n        } else {\n          const matchingExternalHref = matchingRegexes(\n            allowedExternalHrefs,\n            hrefNode.attrs.href,\n          );\n          const matchingInternalHref = matchingRegexes(\n            allowedInternalLinks,\n            hrefNode.attrs.href,\n          );\n          if (\n            !matchingInternalHref &&\n            !matchingExternalHref &&\n            !parentTag(hrefNode, \"head\")\n          ) {\n            // eslint-disable-next-line no-script-url\n            hrefNode.setAttribute(\"href\", \"javascript:void(0)\");\n            onClick =\n              \"window.parent.postMessage({msg: 'ERROR: External link'})\";\n          } else if (matchingExternalHref) {\n            onClick = `window.parent.postMessage({msg: 'Allowed external link', payload: { linkTo: '${hrefNode.attrs.href}' }})`;\n          }\n        }\n\n        if (onClick) {\n          hrefNode.removeAttribute(\"target\");\n          hrefNode.setAttribute(\"onclick\", onClick);\n        }\n      });\n\n      const srcNodes = indexPage.querySelectorAll(\"[src]\");\n      srcNodes.forEach((srcNode) => {\n        const projectImage = projectImages.filter(\n          (component) => component.filename === srcNode.attrs.src,\n        );\n        srcNode.setAttribute(\n          \"src\",\n          !!projectImage.length ? projectImage[0].url : \"\",\n        );\n      });\n\n      body.appendChild(parse(`<meta filename=\"${previewFile}\" />`));\n\n      const blob = getBlobURL(indexPage.toString(), \"text/html\");\n      output.current.src = blob;\n      if (codeRunTriggered) {\n        dispatch(codeRunHandled());\n      }\n    } else {\n      output.current.src = externalLink;\n\n      dispatch(codeRunHandled());\n    }\n  };\n\n  return (\n    <div className=\"htmlrunner-container\">\n      <ErrorModal errorType={error} additionalOnClose={closeModal} />\n      {isEmbedded || autorunEnabled || codeHasBeenRun ? (\n        <Tabs>\n          <div className=\"react-tabs__tab-container\">\n            <TabList>\n              <Tab>\n                <span className=\"react-tabs__tab-text\">{`${runningFile} ${t(\n                  \"output.preview\",\n                )}`}</span>\n              </Tab>\n            </TabList>\n            {!isEmbedded && isMobile ? <RunnerControls skinny /> : null}\n          </div>\n          <TabPanel>\n            <iframe\n              className=\"htmlrunner-iframe\"\n              id=\"output-frame\"\n              title={t(\"runners.HtmlOutput\")}\n              ref={output}\n              onLoad={iframeReload}\n            />\n          </TabPanel>\n        </Tabs>\n      ) : null}\n    </div>\n  );\n}\n\nexport default HtmlRunner;\n","import React from \"react\";\nimport PythonRunner from \"./PythonRunner/PythonRunner\";\nimport HtmlRunner from \"./HtmlRunner/HtmlRunner\";\n\nconst RunnerFactory = ({ projectType }) => {\n  const Runner = () => {\n    if (projectType === \"html\") {\n      return HtmlRunner;\n    }\n    return PythonRunner;\n  };\n\n  const Selected = Runner();\n\n  return <Selected />;\n};\n\nexport default RunnerFactory;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport ExternalFiles from \"../../ExternalFiles/ExternalFiles\";\nimport RunnerFactory from \"../Runners/RunnerFactory\";\nimport RunBar from \"../../RunButton/RunBar\";\n\nconst Output = () => {\n  const project = useSelector((state) => state.editor.project);\n  const isEmbedded = useSelector((state) => state.editor.isEmbedded);\n  const searchParams = new URLSearchParams(window.location.search);\n  const isBrowserPreview = searchParams.get(\"browserPreview\") === \"true\";\n\n  return (\n    <>\n      <ExternalFiles />\n      <div className=\"proj-runner-container\">\n        <RunnerFactory projectType={project.project_type} />\n        {isEmbedded && !isBrowserPreview ? <RunBar embedded /> : null}\n      </div>\n    </>\n  );\n};\n\nexport default Output;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { syncProject, setProject } from \"../redux/EditorSlice\";\nimport { defaultPythonProject } from \"../utils/defaultProjects\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useProject = ({\n  projectIdentifier = null,\n  code = null,\n  accessToken = null,\n  isEmbedded = false,\n  isBrowserPreview = false,\n}) => {\n  const getCachedProject = (id) =>\n  JSON.parse(localStorage.getItem(id || \"project\"));\n  const [cachedProject, setCachedProject] = useState(\n    getCachedProject(projectIdentifier),\n  );\n  const { i18n } = useTranslation();\n  const dispatch = useDispatch();\n\n  const loadCachedProject = () => {\n    dispatch(setProject(cachedProject));\n  };\n\n  useEffect(() => {\n    setCachedProject(getCachedProject(projectIdentifier));\n  }, [projectIdentifier]);\n\n  useEffect(() => {\n    const is_cached_saved_project =\n      projectIdentifier &&\n      cachedProject &&\n      cachedProject.identifier === projectIdentifier;\n    const is_cached_unsaved_project = !projectIdentifier && cachedProject;\n\n    if (is_cached_saved_project || is_cached_unsaved_project) {\n      loadCachedProject();\n      return;\n    }\n\n    if (projectIdentifier) {\n      dispatch(\n        syncProject(\"load\")({\n          identifier: projectIdentifier,\n          locale: i18n.language,\n          accessToken: accessToken,\n        }),\n      );\n      return;\n    }\n\n    if (code) {\n      const project = {\n        name: \"Blank project\",\n        type: \"python\",\n        components: [{ name: \"main\", extension: \"py\", content: code }],\n      };\n      dispatch(setProject(project));\n      return;\n    }\n\n    const data = defaultPythonProject;\n    dispatch(setProject(data));\n  }, [projectIdentifier, cachedProject, i18n.language, accessToken]);\n};","/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setEmbedded } from \"../redux/EditorSlice\";\n\nexport const useEmbeddedMode = (embed = false) => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (embed) {\n      dispatch(setEmbedded());\n    }\n  }, []);\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\n\nimport Button from \"../Button/Button\";\nimport \"../../assets/stylesheets/Modal.scss\";\nimport { closeNotFoundModal, syncProject } from \"../../redux/EditorSlice\";\nimport { defaultPythonProject } from \"../../utils/defaultProjects\";\nimport GeneralModal from \"./GeneralModal\";\n\nconst NotFoundModal = (props) => {\n  const {\n    buttons = null,\n    text = null,\n    withCloseButton = true,\n    withClickToClose = true,\n  } = props;\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n  const user = useSelector((state) => state.auth.user);\n\n  const isModalOpen = useSelector((state) => state.editor.notFoundModalShowing);\n  const closeModal = () => dispatch(closeNotFoundModal());\n\n  const createNewProject = async () => {\n    if (user) {\n      dispatch(\n        syncProject(\"save\")({\n          project: defaultPythonProject,\n          accessToken: user.access_token,\n          autosave: false,\n        }),\n      );\n    }\n    closeModal();\n  };\n\n  return (\n    <GeneralModal\n      isOpen={isModalOpen}\n      closeModal={withClickToClose ? closeModal : null}\n      withCloseButton={withCloseButton}\n      heading={t(\"project.notFoundModal.heading\")}\n      text={\n        text || [\n          { type: \"paragraph\", content: t(\"project.notFoundModal.text\") },\n        ]\n      }\n      buttons={\n        buttons || [\n          <Button\n            key=\"new\"\n            className=\"btn--primary\"\n            buttonText={t(\"project.notFoundModal.newProject\")}\n            onClickHandler={createNewProject}\n          />,\n          <a\n            key=\"link\"\n            className=\"btn btn--secondary\"\n            href=\"https://projects.raspberrypi.org\"\n          >\n            {t(\"project.notFoundModal.projectsSiteLinkText\")}\n          </a>,\n        ]\n      }\n      defaultCallback={createNewProject}\n    />\n  );\n};\n\nexport default NotFoundModal;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\n\nimport Button from \"../Button/Button\";\nimport \"../../assets/stylesheets/Modal.scss\";\nimport { closeAccessDeniedNoAuthModal } from \"../../redux/EditorSlice\";\nimport LoginButton from \"../Login/LoginButton\";\nimport GeneralModal from \"./GeneralModal\";\nimport { login } from \"../../utils/login\";\n\nconst AccessDeniedNoAuthModal = (props) => {\n  const {\n    buttons = null,\n    text = null,\n    withCloseButton = true,\n    withClickToClose = true,\n  } = props;\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  const isModalOpen = useSelector(\n    (state) => state.editor.accessDeniedNoAuthModalShowing,\n  );\n  const accessDeniedData = useSelector(\n    (state) => state.editor.modals.accessDenied,\n  );\n\n  const closeModal = () => dispatch(closeAccessDeniedNoAuthModal());\n\n  const defaultCallback = () => {\n    login({ accessDeniedData });\n  };\n\n  return (\n    <GeneralModal\n      isOpen={isModalOpen}\n      closeModal={withClickToClose ? closeModal : null}\n      withCloseButton={withCloseButton}\n      heading={t(\"project.accessDeniedNoAuthModal.heading\")}\n      text={\n        text || [\n          {\n            type: \"paragraph\",\n            content: t(\"project.accessDeniedNoAuthModal.text\"),\n          },\n        ]\n      }\n      buttons={\n        buttons || [\n          <LoginButton\n            key=\"login\"\n            buttonText={t(\"project.accessDeniedNoAuthModal.loginButtonText\")}\n            className=\"btn--primary\"\n          />,\n          <a\n            key=\"link\"\n            className=\"btn btn--secondary\"\n            href=\"https://projects.raspberrypi.org\"\n          >\n            {t(\"project.accessDeniedNoAuthModal.projectsSiteLinkText\")}\n          </a>,\n          <Button\n            key=\"close\"\n            buttonText={t(\"project.accessDeniedNoAuthModal.newProject\")}\n            className=\"btn--tertiary\"\n            onClickHandler={closeModal}\n          />,\n        ]\n      }\n      defaultCallback={defaultCallback}\n    />\n  );\n};\n\nexport default AccessDeniedNoAuthModal;\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport NotFoundModal from \"./NotFoundModal\";\n\nconst NotFoundModalEmbedded = (props) => {\n  const { t } = useTranslation();\n\n  return (\n    <NotFoundModal\n      withCloseButton={false}\n      withClickToClose={false}\n      buttons={[\n        <a\n          className=\"btn btn--secondary\"\n          href=\"https://projects.raspberrypi.org\"\n        >\n          {t(\"project.notFoundModal.projectsSiteLinkText\")}\n        </a>,\n      ]}\n      text={[\n        {\n          type: \"paragraph\",\n          content: t(\"project.notFoundModal.embedded.text\"),\n        },\n      ]}\n    />\n  );\n};\n\nexport default NotFoundModalEmbedded;\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport AccessDeniedNoAuthModal from \"./AccessDeniedNoAuthModal\";\n\nconst AccessDeniedNoAuthModalEmbedded = (props) => {\n  const { t } = useTranslation();\n\n  return (\n    <AccessDeniedNoAuthModal\n      withCloseButton={false}\n      withClickToClose={false}\n      buttons={[\n        <a\n          className=\"btn btn--secondary\"\n          href=\"https://projects.raspberrypi.org\"\n        >\n          {t(\"project.accessDeniedNoAuthModal.projectsSiteLinkText\")}\n        </a>,\n      ]}\n      text={[\n        {\n          type: \"paragraph\",\n          content: t(\"project.accessDeniedNoAuthModal.embedded.text\"),\n        },\n      ]}\n    />\n  );\n};\n\nexport default AccessDeniedNoAuthModalEmbedded;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport \"../../assets/stylesheets/EmbeddedViewer.scss\";\nimport \"../../assets/stylesheets/Project.scss\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useProject } from \"../../hooks/useProject\";\nimport { useEmbeddedMode } from \"../../hooks/useEmbeddedMode\";\nimport Output from \"../Editor/Output/Output\";\nimport { useParams, useSearchParams } from \"react-router-dom\";\nimport NotFoundModalEmbedded from \"../Modals/NotFoundModalEmbedded\";\nimport AccessDeniedNoAuthModalEmbedded from \"../Modals/AccessDeniedNoAuthModalEmbedded\";\n\nconst EmbeddedViewer = () => {\n  const loading = useSelector((state) => state.editor.loading);\n  const notFoundModalShowing = useSelector(\n    (state) => state.editor.notFoundModalShowing,\n  );\n  const accessDeniedNoAuthModalShowing = useSelector(\n    (state) => state.editor.accessDeniedNoAuthModalShowing,\n  );\n  const { identifier } = useParams();\n  const user = useSelector((state) => state.auth.user) || {};\n  const [searchParams] = useSearchParams();\n  const isBrowserPreview = searchParams.get(\"browserPreview\") === \"true\";\n\n  useProject({\n    projectIdentifier: identifier,\n    accessToken: user.access_token,\n    isEmbedded: true,\n    isBrowserPreview,\n  });\n\n  useEmbeddedMode(true);\n\n  return (\n    <div className=\"embedded-viewer\">\n      {loading === \"success\" ? <Output /> : null}\n      {notFoundModalShowing ? <NotFoundModalEmbedded /> : null}\n      {accessDeniedNoAuthModalShowing ? (\n        <AccessDeniedNoAuthModalEmbedded />\n      ) : null}\n    </div>\n  );\n};\n\nexport default EmbeddedViewer;\n"],"sourceRoot":""}