(this["webpackJsonp@raspberrypifoundation/editor-ui"]=this["webpackJsonp@raspberrypifoundation/editor-ui"]||[]).push([[8],{517:function(e,t,n){},519:function(e,t,n){},520:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c="(max-width: ".concat("600px",")")},523:function(e,t,n){"use strict";n(1);var c=n(538),r=n.n(c),a=n(103),o=(n(519),n(102)),i=n(235),s=n(14);t.a=function(e){var t=e.buttons,n=void 0===t?[]:t,c=e.children,u=e.defaultCallback,l=e.heading,d=e.isOpen,j=e.text,b=void 0===j?[]:j,p=e.withCloseButton,h=void 0!==p&&p,m=e.closeModal,f=Object(o.b)().t;return Object(s.jsx)("div",{onKeyDown:function(e){"Enter"===e.key&&u&&(e.preventDefault(),u())},children:Object(s.jsxs)(r.a,{isOpen:d,onRequestClose:m,className:"modal-content",overlayClassName:"modal-overlay",contentLabel:l,parentSelector:function(){return document.querySelector("#app")},appElement:document.getElementById("app")||void 0,children:[Object(s.jsxs)("div",{className:"modal-content__header",children:[Object(s.jsx)("h2",{className:"modal-content__heading",children:l}),h?Object(s.jsx)(a.a,{className:"btn--tertiary",onClickHandler:m,ButtonIcon:i.a,label:f("modals.close"),title:f("modals.close")}):null]}),Object(s.jsxs)("div",{className:"modal-content__body",children:[b.map((function(e,t){return"subheading"===e.type?Object(s.jsx)("h3",{className:"modal-content__subheading",children:e.content},t):Object(s.jsx)("p",{className:"modal-content__text",children:e.content},t)})),c]}),Object(s.jsx)("div",{className:"modal-content__buttons",children:n})]})})}},525:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var c=n(322),r={project_type:"python",name:c.a.t("project.untitled"),locale:null,components:[{extension:"py",name:"main",content:"",default:!0}],image_list:[]},a={project_type:"html",name:c.a.t("project.untitled"),components:[{extension:"html",name:"index",content:""},{extension:"css",name:"style",content:""}]},o={python:r,html:a}},528:function(e,t,n){"use strict";var c,r=n(1),a=n(0),o=n(130),i=n(103),s=n(78),u=n(233),l=n(14),d=["embedded","className"],j=function(e){var t=e.embedded,n=void 0!==t&&t,c=e.className,r=Object(o.a)(e,d),j=Object(s.d)();return Object(l.jsx)(i.a,Object(a.a)({className:"btn--primary btn--run".concat(c?" ".concat(c):""),onClickHandler:function(){window.plausible&&window.plausible("Run button".concat(n?" embedded":"")),j(Object(u.J)())}},r))},b=n(7),p=n(102),h=["embedded","className"],m=function(e){var t=e.embedded,n=void 0!==t&&t,c=e.className,d=Object(o.a)(e,h),j=Object(s.e)((function(e){return e.editor.codeRunStopped})),m=Object(s.e)((function(e){return e.editor.codeRunTriggered})),f=Object(s.d)(),O=Object(p.b)().t,v=Object(l.jsx)(i.a,Object(a.a)({className:"btn--primary btn--stop".concat(c?" ".concat(c):""),onClickHandler:function(){window.plausible&&window.plausible("Stop button".concat(n?" embedded":"")),m&&f(Object(u.G)()),f(Object(u.H)())}},d)),x=Object(r.useState)(v),_=Object(b.a)(x,2),g=_[0],y=_[1];return Object(r.useEffect)((function(){if(j){var e=Object(l.jsx)(i.a,{className:"".concat(c?" ".concat(c):""),buttonText:O("runButton.stopping"),disabled:!0});setTimeout((function(){y(e)}),100)}}),[c,j,O]),g};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},f.apply(this,arguments)}var O,v=function(e){return r.createElement("svg",f({width:11,height:14,viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),c||(c=r.createElement("path",{d:"M0 14V0l11 7-11 7z"})))};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},x.apply(this,arguments)}var _=function(e){return r.createElement("svg",x({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),O||(O=r.createElement("path",{d:"M0 12V0h12v12H0z"})))};n(575),t.a=function(e){var t=e.embedded,n=void 0!==t&&t,c=e.skinny,r=void 0!==c&&c,a=Object(s.e)((function(e){return e.editor.codeRunTriggered})),o=Object(s.e)((function(e){return e.editor.drawTriggered})),i=Object(p.b)().t;return Object(l.jsx)("div",{className:"runner-controls",children:a||o?Object(l.jsx)(m,{embedded:n,buttonText:i("runButton.stop"),ButtonIcon:_,buttonIconPosition:"right",buttonOuter:r,className:"btn--stop btn--primary".concat(r?" btn--small":"")}):Object(l.jsx)(j,{embedded:n,buttonText:i("runButton.run"),ButtonIcon:v,buttonIconPosition:"right",buttonOuter:r,className:r?"btn--small":""})})}},534:function(e,t,n){},544:function(e,t,n){"use strict";n(1);var c=n(528),r=(n(579),n(14));t.a=function(e){var t=e.embedded,n=void 0!==t&&t;return Object(r.jsx)("div",{className:"run-bar",children:Object(r.jsx)(c.a,{embedded:n})})}},546:function(e,t,n){"use strict";var c=n(1),r=n(78),a=n(14),o=function(){var e=Object(r.e)((function(e){return e.editor.project}));return Object(a.jsx)("div",{id:"file-content",hidden:!0,children:e.components.map((function(e,t){return["csv","txt"].includes(e.extension)?Object(a.jsx)("div",{id:"".concat(e.name,".").concat(e.extension),children:e.content},t):null}))})},i=n(7),s=(n(572),n(102)),u=n(527),l=n(518),d=n.n(l),j=n(521),b=n(233),p=(n(534),n(234)),h=function(){var e=Object(r.e)((function(e){return e.editor.error})),t=Object(c.useContext)(p.a);return e?Object(a.jsx)("div",{className:"error-message error-message--".concat(t.fontSize),children:Object(a.jsx)("p",{className:"error-message__content",children:e})}):null},m=n(137),f=n(183),O=n(18),v=n(4),x=n(0),_=(n(517),n(522)),g=n(609),y=n(529),w=n(728),N=n(729),E=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ambientLight",{intensity:.25}),Object(a.jsx)("pointLight",{intensity:.35,angle:28,penumbra:2,position:[.418,16.199,.3],castShadow:!0}),Object(a.jsx)("pointLight",{position:[-16.116,14.37,8.208],intensity:.5,castShadow:!0}),Object(a.jsx)("pointLight",{position:[-16.109,18.021,-8.207],intensity:.5,castShadow:!0}),Object(a.jsx)("pointLight",{position:[14.904,12.198,-1.832],intensity:.17,castShadow:!0}),Object(a.jsx)("pointLight",{position:[-.462,8.89,14.52],intensity:.43,castShadow:!0}),Object(a.jsx)("pointLight",{position:[3.235,11.486,-12.541],intensity:.2,castShadow:!0}),Object(a.jsx)("pointLight",{position:[0,-20,0],intensity:.5,castShadow:!0})]})},T={_Eps:1e-5};function M(){return 1e3*Date.now()}T.Vector=function(e,t,n){this.x=e,this.y=t,this.z=n},T.Vector.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();e<=T._Eps||(this.x/=e,this.y/=e,this.z/=e)}},T.transpose3x3Matrix=function(e){var t=[[0,0,0],[0,0,0],[0,0,0]];return t[0][0]=e[0][0],t[0][1]=e[1][0],t[0][2]=e[2][0],t[1][0]=e[0][1],t[1][1]=e[1][1],t[1][2]=e[2][1],t[2][0]=e[0][2],t[2][1]=e[1][2],t[2][2]=e[2][2],t},T.dot3x3and3x1=function(e,t){var n=[];return n[0]=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],n[1]=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],n[2]=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2],n},T.multiplyArrayWithScalar=function(e,t){return[e[0]*t,e[1]*t,e[2]*t]},T.divideArrayWithScalar=function(e,t){return[e[0]/t,e[1]/t,e[2]/t]},T.Defaults={},T.Defaults.O=[0,0,0],T.Defaults.X=[1,0,0],T.Defaults.Y=[0,1,0],T.Defaults.Z=[0,0,1],T.Defaults.NORTH=T.multiplyArrayWithScalar(T.Defaults.X,.33),T.Defaults.GRAVITY=T.Defaults.Z,T.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},T.degToRad=function(e){return e instanceof Array?[e[0]*Math.PI/180,e[1]*Math.PI/180,e[2]*Math.PI/180]:e*Math.PI/180},T.radToDeg=function(e){return e instanceof Array?[180*e[0]/Math.PI,180*e[1]/Math.PI,180*e[2]/Math.PI]:180*e/Math.PI},window.rotatemodel=function(e,t,n){window.mod.rotation.x=e,window.mod.rotation.y=t,window.mod.rotation.z=n};var S,k=n(3),A=n(724),C=n(516),H=function(){var e=Object(A.a)("".concat("/ide4school/editor/inject","/models/raspi-compressed.glb")).scene;window.mod=e;var t={"0_0_0":new _.MeshStandardMaterial({color:"rgb(0,0,0)"})};function n(n,c,r,a){var o,i=n%8,s=Math.floor(n/8);"".concat(c,"_").concat(r,"_").concat(a)in t?o=t["".concat(c,"_").concat(r,"_").concat(a)]:(o=new _.MeshStandardMaterial({color:"rgb(".concat(c,",").concat(r,",").concat(a,")")}),t["".concat(c,"_").concat(r,"_").concat(a)]=o);var u=e.getObjectByName("circle".concat(i,"_").concat(7-s,"-1"));null!=u&&(u.material=o)}return d.a.sense_hat_emit=function(e,t){if(e&&"setpixel"===e){var c=t,r=d.a.sense_hat.pixels[c];d.a.sense_hat.pixels[c]=[-8&r[0],-4&r[1],-8&r[2]],n(c,parseInt(255*r[0]),parseInt(255*r[1]),parseInt(255*r[2]))}else e&&"setpixels"===e&&function(e,t){null==e&&(e=Array.from(Array(64).keys()));var c,r=0,a=Object(k.a)(e);try{for(a.s();!(c=a.n()).done;)n(c.value,t[r][0],t[r][1],t[r][2]),r+=1}catch(o){a.e(o)}finally{a.f()}}(t,d.a.sense_hat.pixels);Object(C.k)()},Object(a.jsx)("primitive",{object:e,scale:4})},R=!1,P=.5,V=.2,L=0,z=0,I=0,D=0,B=window.innerWidth/2,F=window.innerHeight/2,q=25e-5,W=function(e){var t=e.updateOrientation,n=function(){R=!1};return Object(a.jsxs)(y.a,{frameloop:"demand",onPointerDown:function(e){R=!0,z=e.clientX-B,D=e.clientY-F},onPointerUp:n,onPointerOut:n,onPointerMove:function(e){var n,c,r;L=e.clientX-B,P=(L-z)*q,I=e.clientY-F,V=(I-D)*q,R&&(window.mod.rotateOnWorldAxis(new _.Vector3(0,0,-1),P),window.mod.rotateOnWorldAxis(new _.Vector3(1,0,0),V),t((n=window.mod.rotation.x,c=window.mod.rotation.y,r=window.mod.rotation.z,[(180*c/Math.PI+360)%360,(180*n/Math.PI+90+360)%360,(180*r/Math.PI+360)%360])),V*=.75,P*=.75)},resize:{polyfill:g.a},children:[Object(a.jsx)(E,{}),Object(a.jsxs)(c.Suspense,{fallback:null,children:[Object(a.jsx)(w.a,{makeDefault:!0,fov:25,near:1,far:2e4,position:[0,1.5,0]}),Object(a.jsx)(H,{}),Object(a.jsx)(N.a,{enableRotate:!1,enablePan:!1,enableZoom:!1,enabled:!1})]})]})},J=function(e){var t=e.name,n=e.label,r=e.type,o=e.defaultValue,s=Object(c.useState)(o),u=Object(i.a)(s,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){d.a.sense_hat&&Object(c.startTransition)((function(){d.a.sense_hat[t]=l}))}),[t,l]),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__container",children:[Object(a.jsx)("label",{className:"sense-hat-controls-panel__control-name",htmlFor:"sense_hat_".concat(t),children:n}),Object(a.jsx)("input",{type:r,id:"sense_hat_".concat(t),defaultValue:l,onChange:function(e){return j(e.target.value)}})]})},G=n(596),U=n.n(G),Y=(n(597),function(e){var t=e.defaultValue,n=Object(c.useState)(t),o=Object(i.a)(n,2),u=o[0],l=o[1],j=Object(r.e)((function(e){return e.editor.codeRunTriggered})),b=Object(s.b)().t;return Object(c.useEffect)((function(){j||(d.a.sense_hat.start_motion_callback=function(){},d.a.sense_hat.stop_motion_callback=function(){})}),[j]),Object(c.useEffect)((function(){d.a.sense_hat&&Object(c.startTransition)((function(){d.a.sense_hat.motion=u})),u?d.a.sense_hat.start_motion_callback():d.a.sense_hat.stop_motion_callback()}),[u]),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__container",children:[Object(a.jsx)("label",{className:"sense-hat-controls-panel__control-name",htmlFor:"sense_hat_motion",children:b("output.senseHat.controls.motion")}),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__control-toggle",children:[Object(a.jsx)("label",{htmlFor:"sense_hat_motion",children:b("output.senseHat.controls.motionSensorOptions.no")}),Object(a.jsx)(U.a,{id:"sense_hat_motion",icons:!1,checked:u,onChange:function(e){return l(e.target.checked)}}),Object(a.jsx)("label",{htmlFor:"sense_hat_motion",children:b("output.senseHat.controls.motionSensorOptions.yes")})]})]})}),Q=function(e){var t=e.name,n=e.label,r=e.unit,o=e.min,s=e.max,u=e.defaultValue,l=e.Icon,j=Object(c.useState)(u),b=Object(i.a)(j,2),p=b[0],h=b[1];return Object(c.useEffect)((function(){d.a.sense_hat&&Object(c.startTransition)((function(){d.a.sense_hat.rtimu[t][1]=p+Math.random()-.5}))}),[t,p]),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__control",children:[Object(a.jsx)("label",{className:"sense-hat-controls-panel__control-name",htmlFor:"sense_hat_".concat(t),children:n}),Object(a.jsx)("input",{id:"sense_hat_".concat(t),className:"sense-hat-controls-panel__control-input",type:"range",min:o,max:s,step:"1",defaultValue:p,onChange:function(e){return h(parseFloat(e.target.value))}}),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__control-reading",children:[l?Object(a.jsx)(l,{}):null,Object(a.jsxs)("span",{className:"sense-hat-controls-panel__control-value",children:[p,r]})]})]})},X=n(598),Z=function(){var e=Object(r.e)((function(e){return e.editor.codeRunTriggered})),t=Object(X.useStopwatch)({autoStart:!1}),n=t.seconds,o=t.minutes,u=t.isRunning,l=t.pause,j=t.reset,b=Object(c.useState)(!1),p=Object(i.a)(b,2),h=p[0],m=p[1],f=Object(s.b)().t;return Object(c.useEffect)((function(){window.addEventListener("blur",(function(){m(!0)}))}),[]),Object(c.useEffect)((function(){e&&!u&&(m(!1),j()),!e&&u&&(l(),d.a.sense_hat.mz_criteria.duration=h?null:60*o+n)}),[e,h,o,n,u,l,j]),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__container sense-hat-controls-panel__container-timer",children:[Object(a.jsx)("label",{className:"sense-hat-controls-panel__control-name",htmlFor:"sense_hat_timer",children:f("output.senseHat.controls.timer")}),Object(a.jsxs)("span",{className:"sense-hat-controls-panel__control-reading sense-hat-controls-panel__control-reading-timer",id:"sense_hat_timer",children:[Object(a.jsx)("span",{children:String(o).padStart(2,"0")}),":",Object(a.jsx)("span",{children:String(n).padStart(2,"0")})]})]})};function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},$.apply(this,arguments)}var K,ee,te,ne=function(e){return c.createElement("svg",$({width:16,height:20,viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),S||(S=c.createElement("path",{d:"M10.5 16c.417 0 .77-.146 1.062-.438.292-.291.438-.645.438-1.062 0-.417-.146-.77-.438-1.062A1.444 1.444 0 0010.5 13c-.417 0-.77.146-1.062.438A1.444 1.444 0 009 14.5c0 .417.146.77.438 1.062.291.292.645.438 1.062.438zm-5.05-.05l6.5-6.5-1.4-1.4-6.5 6.5 1.4 1.4zM5.5 11c.417 0 .77-.146 1.062-.438C6.854 10.271 7 9.917 7 9.5c0-.417-.146-.77-.438-1.062A1.444 1.444 0 005.5 8c-.417 0-.77.146-1.062.438A1.444 1.444 0 004 9.5c0 .417.146.77.438 1.062.291.292.645.438 1.062.438zM8 20c-2.283 0-4.187-.783-5.712-2.35C.763 16.083 0 14.133 0 11.8c0-1.667.663-3.479 1.988-5.437C3.313 4.404 5.317 2.283 8 0c2.683 2.283 4.688 4.404 6.013 6.363C15.338 8.321 16 10.133 16 11.8c0 2.333-.763 4.283-2.288 5.85C12.187 19.217 10.283 20 8 20zm0-2c1.733 0 3.167-.587 4.3-1.762S14 13.583 14 11.8c0-1.217-.504-2.592-1.512-4.125C11.479 6.142 9.983 4.467 8 2.65 6.017 4.467 4.521 6.142 3.513 7.675 2.504 9.208 2 10.583 2 11.8c0 1.783.567 3.263 1.7 4.438C4.833 17.413 6.267 18 8 18z"})))};function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ce.apply(this,arguments)}var re,ae=function(e){return c.createElement("svg",ce({transform:"scale(1.6)",width:15,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),K||(K=c.createElement("path",{d:"M8.752 7.001a1 1 0 01-1.971.237c-.062-.252-.123-.52-.307-.704L5.411 5.471a.5.5 0 11.707-.707l.957.957c.207.207.52.25.81.29a1 1 0 01.867.99z"})),ee||(ee=c.createElement("path",{d:"M11.75 6.75a4.25 4.25 0 11-8.5 0 4.25 4.25 0 018.5 0zm-1 0a3.25 3.25 0 11-6.5 0 3.25 3.25 0 016.5 0z"})),te||(te=c.createElement("path",{d:"M6.252 10.5h2.5v.75a1.25 1.25 0 11-2.5 0z"})))};function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},oe.apply(this,arguments)}var ie,se=function(e){return c.createElement("svg",oe({width:10,height:20,viewBox:"0 0 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),re||(re=c.createElement("path",{d:"M5 20c-1.383 0-2.562-.487-3.537-1.462C.488 17.563 0 16.383 0 15c0-.8.175-1.546.525-2.238A5.083 5.083 0 012 11V3c0-.833.292-1.542.875-2.125A2.893 2.893 0 015 0c.833 0 1.542.292 2.125.875S8 2.167 8 3v8a5.083 5.083 0 011.475 1.762C9.825 13.454 10 14.2 10 15c0 1.383-.487 2.563-1.462 3.538C7.563 19.513 6.383 20 5 20zM4 9h2V8H5V7h1V5H5V4h1V3a.97.97 0 00-.287-.713A.97.97 0 005 2a.967.967 0 00-.712.287A.968.968 0 004 3v6z"})))},ue=function(e){var t=e.temperature,n=e.pressure,c=e.humidity,r=e.colour,o=e.motion,i=Object(s.b)().t;return Object(a.jsxs)("div",{className:"sense-hat-controls",children:[Object(a.jsx)("h2",{className:"sense-hat-controls-heading",children:i("output.senseHat.controls.name")}),Object(a.jsxs)("div",{className:"sense-hat-controls-panel",children:[Object(a.jsxs)("div",{className:"sense-hat-controls-panel__sliders",children:[Object(a.jsx)(Q,{name:"temperature",label:i("output.senseHat.controls.temperature"),unit:"\xb0C",min:-40,max:120,defaultValue:t,Icon:se}),Object(a.jsx)(Q,{name:"pressure",label:i("output.senseHat.controls.pressure"),unit:"hPa",min:260,max:1260,defaultValue:n,Icon:ae}),Object(a.jsx)(Q,{name:"humidity",label:i("output.senseHat.controls.humidity"),unit:"%",min:0,max:100,defaultValue:c,Icon:ne})]}),Object(a.jsxs)("div",{className:"sense-hat-controls-panel__control sense-hat-controls-panel__control-last",children:[Object(a.jsx)(J,{name:"colour",label:i("output.senseHat.controls.colour"),type:"color",defaultValue:r}),Object(a.jsx)(Y,{defaultValue:o}),Object(a.jsx)(Z,{})]})]})]})},le=function(e){var t=e.name,n=e.value;return Object(a.jsxs)("span",{className:"sense-hat-model-orientation__reading",children:[t,": ",Math.round(n)]})};function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},de.apply(this,arguments)}var je,be=function(e){return c.createElement("svg",de({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ie||(ie=c.createElement("path",{d:"M10 0h6v2h-2.75l.4.35c.817.817 1.413 1.704 1.788 2.662.375.959.562 1.938.562 2.938 0 1.85-.554 3.496-1.663 4.937-1.108 1.442-2.554 2.396-4.337 2.863v-2.1a5.93 5.93 0 002.9-2.212A5.92 5.92 0 0014 7.95c0-.75-.142-1.48-.425-2.188-.283-.708-.725-1.362-1.325-1.962L12 3.55V6h-2V0zM6 16H0v-2h2.75l-.4-.35c-.867-.767-1.475-1.642-1.825-2.625A8.816 8.816 0 010 8.05C0 6.2.554 4.554 1.662 3.112 2.771 1.671 4.217.717 6 .25v2.1a5.93 5.93 0 00-2.9 2.212A5.92 5.92 0 002 8.05c0 .75.142 1.479.425 2.187.283.709.725 1.363 1.325 1.963l.25.25V10h2v6z"})))},pe=function(e){var t=e.resetOrientation;return Object(a.jsx)("button",{onClick:function(e){return t(e)},children:Object(a.jsx)(be,{})})},he=function(e){var t=Object(s.b)().t,n=e.orientation,c=e.resetOrientation;return Object(a.jsxs)("div",{className:"sense-hat-model-orientation",children:[Object(a.jsx)("div",{className:"sense-hat-model-orientation__spacing"}),Object(a.jsxs)("div",{className:"sense-hat-model-orientation__values",children:[Object(a.jsx)(le,{name:t("output.senseHat.model.roll"),value:n[0]}),Object(a.jsx)(le,{name:t("output.senseHat.model.pitch"),value:n[1]}),Object(a.jsx)(le,{name:t("output.senseHat.model.yaw"),value:n[2]})]}),Object(a.jsx)("div",{className:"sense-hat-model-orientation__reset-btn",children:Object(a.jsx)(pe,{resetOrientation:c})})]})},me={duration:null,noInputEvents:!0,readColour:!1,readHumidity:!1,readPressure:!1,readTemperature:!1,usedLEDs:!1},fe=function(){var e=Object(r.e)((function(e){return e.editor.project})),t=Object(c.useState)([0,90,0]),n=Object(i.a)(t,2),o=n[0],s=n[1];if(!d.a.sense_hat){d.a.sense_hat={colour:"#FF00A4",gamma:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],low_light:!1,motion:!1,mz_criteria:Object(x.a)({},me),pixels:[],rtimu:{pressure:[1,1013+Math.random()-.5],temperature:[1,13+Math.random()-.5],humidity:[1,45+Math.random()-.5],gyro:[0,0,0],accel:[0,0,0],compass:[0,0,33],raw_orientation:[0,90,0]},sensestick:{_eventQueue:[],off:function(){},once:function(){}},start_motion_callback:function(){},stop_motion_callback:function(){}};for(var u=0;u<64;u++)d.a.sense_hat.pixels.push([0,0,0])}return Object(c.useEffect)((function(){d.a.sense_hat.mz_criteria=Object(x.a)({},me)}),[e]),Object(c.useEffect)((function(){d.a.sense_hat.rtimu.raw_orientation=o,function(){var e=d.a.sense_hat.rtimu.timestamp;null!==e&&void 0!==e||(e=M());var t=M(),n=(t-e)/1e6;0===n&&(n=1);var c=d.a.sense_hat.rtimu.raw_old_orientation;null!==c&&void 0!==c||(c=[0,90,0]);var r=T.degToRad(d.a.sense_hat.rtimu.raw_orientation),a=[r[0]-c[0],r[1]-c[1],r[2]-c[2]];a=T.divideArrayWithScalar(a,n);var o=r[0],i=r[1],s=r[2],u=Math.cos(s),l=Math.cos(i),j=Math.cos(o),b=Math.sin(s),p=Math.sin(i),h=Math.sin(o),m=[[u*l,u*p*h-j*b,b*h+u*j*p],[l*b,u*j+b*p*h,j*b*p-u*h],[-p,l*h,l*j]],f=T.transpose3x3Matrix(m),O=T.dot3x3and3x1(f,T.Defaults.GRAVITY),v=T.dot3x3and3x1(f,T.Defaults.NORTH);d.a.sense_hat.rtimu.raw_old_orientation=r,d.a.sense_hat.rtimu.fusionPose=r,d.a.sense_hat.rtimu.timestamp=t,d.a.sense_hat.rtimu.accel=[T.clamp(O[0],-8,8),T.clamp(O[1],-8,8),T.clamp(O[2],-8,8)],d.a.sense_hat.rtimu.gyro=[a[0],a[1],a[2]],d.a.sense_hat.rtimu.compass=[100*v[0],100*v[1],100*v[2]]}()}),[o]),Object(a.jsxs)("div",{className:"sense-hat",children:[Object(a.jsxs)("div",{className:"sense-hat-model",children:[Object(a.jsx)(W,{updateOrientation:s}),Object(a.jsx)(he,{orientation:o,resetOrientation:function(e){e.preventDefault(),window.rotatemodel(T.degToRad(0),T.degToRad(0),T.degToRad(0)),s([0,90,0])}})]}),Object(a.jsx)(ue,{pressure:1013,temperature:13,humidity:45,colour:d.a.sense_hat.colour,motion:d.a.sense_hat.motion})]})},Oe=function(){var e=Object(r.e)((function(e){return e.editor.codeRunTriggered})),t=Object(r.e)((function(e){return e.editor.drawTriggered})),n=Object(r.e)((function(e){return e.editor.senseHatAlwaysEnabled})),o=Object(r.e)((function(e){return e.editor.senseHatEnabled})),i=Object(r.e)((function(e){return e.editor.project.image_list})),u=Object(r.e)((function(e){return e.editor.error})),l=Object(c.useRef)(),j=Object(c.useRef)(),p=Object(c.useRef)(),h=Object(r.d)(),m=Object(s.b)().t;return Object(c.useEffect)((function(){e&&(l.current.innerHTML="",j.current.innerHTML="",p.current.innerHTML="",d.a.py5={},d.a.py5.sketch="p5Sketch",d.a.py5.assets=i,d.a.p5={},d.a.p5.sketch="p5Sketch",d.a.p5.assets=i,(d.a.pygal||(d.a.pygal={})).outputCanvas=j.current,(d.a.TurtleGraphics||(d.a.TurtleGraphics={})).target="outputCanvas",d.a.TurtleGraphics.assets=Object.assign.apply(Object,[{}].concat(Object(v.a)(i.map((function(e){return Object(O.a)({},"".concat(e.name,".").concat(e.extension),e.url)}))))))}),[e,i]),Object(c.useEffect)((function(){!t&&p.current&&""!==p.current.innerHTML&&(d.a.py5.stop?d.a.py5.stop():d.a.p5.stop(),""===u&&h(Object(b.s)(m("output.errors.interrupted"))),h(Object(b.m)()))}),[t,h,m,u]),Object(a.jsxs)("div",{className:"visual-output",children:[Object(a.jsx)("div",{id:"p5Sketch",ref:p}),Object(a.jsx)("div",{id:"pygalOutput",ref:j}),Object(a.jsx)("div",{className:"pythonrunner-canvas-container",children:Object(a.jsx)("div",{id:"outputCanvas",ref:l,className:"pythonrunner-graphic"})}),o||n?Object(a.jsx)(fe,{}):null]})};function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ve.apply(this,arguments)}var xe,_e,ge=function(e){return c.createElement("svg",ve({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),je||(je=c.createElement("path",{d:"M2.5 17.5V9.167h15V17.5h-15zm1.667-1.667h11.666v-5H4.167v5zM2.5 9.167V2.5h15v6.667h-15zm1.667 0h11.666v-5H4.167v5z"})))};function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ye.apply(this,arguments)}var we,Ne=function(e){return c.createElement("svg",ye({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xe||(xe=c.createElement("path",{d:"M17.5 17.5v-15h-15v15h15zm-1.667-1.667H4.167V9.167h11.666v6.666zm0-8.333H4.167V4.167h11.666V7.5zm-7.5-.833H5V5h3.333v1.667z"})),_e||(_e=c.createElement("path",{d:"M9.167 6.667H12.5V5H9.167v1.667z"})))},Ee=n(103),Te=(n(574),n(520)),Me=function(){var e=Object(r.e)((function(e){return e.editor.isSplitView})),t=Object(r.e)((function(e){return e.editor.codeRunTriggered})),n=Object(r.e)((function(e){return e.editor.drawTriggered})),c=Object(j.useMediaQuery)({query:Te.a}),o=Object(r.d)(),i=Object(s.b)().t;return Object(a.jsx)("div",{className:"output-view-toggle",children:Object(a.jsx)(Ee.a,{className:"btn--tertiary output-view-toggle__button",buttonText:c?null:i(e?"outputViewToggle.buttonTabLabel":"outputViewToggle.buttonSplitLabel"),disabled:t||n,label:i(e?"outputViewToggle.buttonTabLabel":"outputViewToggle.buttonSplitLabel"),title:i(e?"outputViewToggle.buttonTabTitle":"outputViewToggle.buttonSplitTitle"),ButtonIcon:e?Ne:ge,buttonIconPosition:"right",onClickHandler:e?function(){o(Object(b.u)(!1))}:function(){o(Object(b.u)(!0))}})})},Se=n(528),ke={"./pygal/__init__.js":{path:"".concat("/ide4school/editor/inject","/shims/pygal/pygal.js"),dependencies:["https://cdnjs.cloudflare.com/ajax/libs/highcharts/6.0.2/highcharts.js","https://cdnjs.cloudflare.com/ajax/libs/highcharts/6.0.2/js/highcharts-more.js"]},"./py5/__init__.js":{path:"".concat("/ide4school/editor/inject","/shims/processing/py5/py5-shim.js"),dependencies:["".concat("/ide4school/editor/inject","/libraries/processing/p5/p5.js")]},"./py5_imported/__init__.js":{path:"".concat("/ide4school/editor/inject","/shims/processing/py5_imported_mode/py5_imported.js")},"./py5_imported_mode.py":{path:"".concat("/ide4school/editor/inject","/shims/processing/py5_imported_mode/py5_imported_mode.py")},"./p5/__init__.js":{path:"".concat("/ide4school/editor/inject","/shims/processing/p5/p5-shim.js"),dependencies:["".concat("/ide4school/editor/inject","/libraries/processing/p5/p5.js")]},"./_internal_sense_hat/__init__.js":{path:"".concat("/ide4school/editor/inject","/shims/sense_hat/_internal_sense_hat.js")},"./sense_hat.py":{path:"".concat("/ide4school/editor/inject","/shims/sense_hat/sense_hat_blob.py")}},Ae=function(){var e=Object(r.e)((function(e){return e.editor.project.components})),t=Object(r.e)((function(e){return e.editor.project.identifier})),n=Object(r.e)((function(e){return e.auth.user})),o=Object(r.e)((function(e){return e.editor.isSplitView})),l=Object(r.e)((function(e){return e.editor.isEmbedded})),O=Object(r.e)((function(e){return e.editor.codeRunTriggered})),v=Object(r.e)((function(e){return e.editor.codeRunStopped})),x=Object(r.e)((function(e){return e.editor.drawTriggered})),_=Object(r.e)((function(e){return e.editor.senseHatAlwaysEnabled})),g=Object(c.useRef)(),y=Object(r.d)(),w=Object(s.b)().t,N=Object(c.useContext)(p.a),E=Object(j.useMediaQuery)({query:Te.a}),T=new URLSearchParams(window.location.search),M=Object(c.useState)("true"===T.get("show_visual_tab")||_),S=Object(i.a)(M,2),k=S[0],A=S[1],C=function(){var e=document.getElementById("input"),t=document.querySelector("editor-wc")?document.querySelector("editor-wc").shadowRoot.getElementById("input"):null;return e||t};Object(c.useEffect)((function(){O&&z()}),[O]),Object(c.useEffect)((function(){if(v&&C()){var e=C();e.removeAttribute("id"),e.removeAttribute("contentEditable"),y(Object(b.s)(w("output.errors.interrupted"))),y(Object(b.m)())}}),[v]),Object(c.useEffect)((function(){if(!O&&!x&&C()){var e=C();e.removeAttribute("id"),e.removeAttribute("contentEditable")}}),[x,O]);var H=["./pygal/__init__.js","./py5/__init__.js","./py5_imported/__init__.js","./p5/__init__.js","./_internal_sense_hat/__init__.js","src/builtin/turtle/__init__.js"],R=function(e){if(""!==e){var t=g.current,n=document.createElement("span");n.classList.add("pythonrunner-console-output-line"),n.innerHTML=new Option(e).innerHTML,t.appendChild(n),t.scrollTop=t.scrollHeight}},P=function(t){"./_internal_sense_hat/__init__.js"===t&&y(Object(b.y)(!0)),"./p5/__init__.js"!==t&&"./py5/__init__.js"!==t||y(Object(b.K)()),H.includes(t)&&A(!0);var n=e.filter((function(e){return"main"!==e.name})).map((function(e){return"./".concat(e.name,".py")}));if(n.includes(t)){var c=t.slice(2,-3),r=e.find((function(e){return e.name===c}));if(r)return r.content}if(void 0!==d.a.builtinFiles&&void 0!==d.a.builtinFiles.files[t])return d.a.builtinFiles.files[t];if(ke[t]){var a=ke[t];return ke[t].code||d.a.misceval.promiseToSuspension(fetch(a.path).then((function(e){return e.text()})).then((function(e){if(!e)throw new d.a.builtin.ImportError("Failed to load remote module");function n(e){if(!document.querySelector('script[src="'.concat(e,'"]')))return new Promise((function(t,n){var c=document.createElement("script");c.type="text/javascript",c.src=e,c.async=!0,c.onload=function(){t(!0)},document.body.appendChild(c)}))}return ke[t].code=e,(a.loadDepsSynchronously?(a.dependencies||[]).reduce((function(e,t){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.all((a.dependencies||[]).map(n))).then((function(){return e})).catch((function(){throw new d.a.builtin.ImportError("Failed to load dependencies required")}))})))}throw new Error("File not found: '"+t+"'")},V=function(){d.a.sense_hat&&(d.a.sense_hat.mz_criteria.noInputEvents=!1),g.current.appendChild(function(){var e=document.createElement("span");return e.setAttribute("id","input"),e.setAttribute("spellCheck","false"),e.setAttribute("class","pythonrunner-input"),e.setAttribute("contentEditable","true"),e}());var e=C();return e.focus(),new Promise((function(t,n){e.addEventListener("keydown",(function n(c){if("Enter"===c.key){e.removeEventListener(c.type,n);var r=e.innerText;e.removeAttribute("id"),e.removeAttribute("contentEditable"),e.innerText=r+"\n",document.addEventListener("keyup",(function e(n){"Enter"===n.key&&(document.removeEventListener(n.type,e),t(r))}))}}))}))},L=function(e){var c;if(e.message===w("output.errors.interrupted"))c=e.message;else{var r,a,o=(e.tp$str&&e.tp$str().v).replace(/\[(.*?)\]/,"").replace(/\.$/,""),i=e.tp$name||e.constructor.name,s=e.traceback[0].lineno,u=e.traceback[0].filename.replace(/^\.\//,"");if(null!==n&&void 0!==n&&n.profile)r=null===(a=n.profile)||void 0===a?void 0:a.user;c="".concat(i,": ").concat(o," on line ").concat(s," of ").concat(u),Object(m.a)(t,r,{errorType:i,errorMessage:c})}if(y(Object(b.s)(c)),y(Object(b.H)()),C()){var l=C();l.removeAttribute("id"),l.removeAttribute("contentEditable")}},z=function(){y(Object(b.s)("")),g.current.innerHTML="",y(Object(b.y)(!1));var t=e[0].content;t.includes("# ".concat(w("input.comment.py5")))&&((t=t.replace("# ".concat(w("input.comment.py5")),"from py5_imported_mode import *")).match(/(\nrun_sketch)/)||(t=t.concat("\nrun_sketch()"))),d.a.configure({inputfun:V,output:R,read:P,debugging:!0,inputTakesPrompt:!0,uncaughtException:L}),d.a.misceval.asyncToPromise((function(){return d.a.importMainWithBody("main",!1,t,!0)}),{"*":function(){if(f.a.getState().editor.codeRunStopped)throw new Error(w("output.errors.interrupted"))}}).catch((function(e){L(e)})).finally((function(){y(Object(b.m)())})).then((function(e){}))};function I(e){if(!(document.getSelection().toString().length>0)){var t=C();if(t&&e.target!==t){var n=C(),c=window.getSelection();if(c.removeAllRanges(),n.innerText&&n.innerText.length>0){var r=document.createRange();r.setStart(n,1),r.collapse(!0),c.addRange(r)}n.focus()}}}return Object(a.jsx)("div",{className:"pythonrunner-container",children:o?Object(a.jsxs)(a.Fragment,{children:[k?Object(a.jsx)("div",{className:"output-panel output-panel--visual",children:Object(a.jsxs)(u.d,{forceRenderTabPanel:!0,children:[Object(a.jsxs)("div",{className:"react-tabs__tab-container",children:[Object(a.jsx)(u.b,{children:Object(a.jsx)(u.a,{children:Object(a.jsx)("span",{className:"react-tabs__tab-text",children:w("output.visualOutput")})},0)}),!l&&k?Object(a.jsx)(Me,{}):null,!l&&E?Object(a.jsx)(Se.a,{skinny:!0}):null]}),Object(a.jsx)(u.c,{children:Object(a.jsx)(Oe,{})},0)]})}):null,Object(a.jsx)("div",{className:"output-panel output-panel--text",children:Object(a.jsxs)(u.d,{forceRenderTabPanel:!0,children:[Object(a.jsxs)("div",{className:"react-tabs__tab-container",children:[Object(a.jsx)(u.b,{children:Object(a.jsx)(u.a,{children:Object(a.jsx)("span",{className:"react-tabs__tab-text",children:w("output.textOutput")})},0)}),k||l||!E?null:Object(a.jsx)(Se.a,{skinny:!0})]}),Object(a.jsx)(h,{}),Object(a.jsx)(u.c,{children:Object(a.jsx)("pre",{className:"pythonrunner-console pythonrunner-console--".concat(N.fontSize),onClick:I,ref:g})},0)]})})]}):Object(a.jsxs)(u.d,{forceRenderTabPanel:!0,defaultIndex:k?0:1,children:[Object(a.jsxs)("div",{className:"react-tabs__tab-container",children:[Object(a.jsxs)(u.b,{children:[k?Object(a.jsx)(u.a,{children:Object(a.jsx)("span",{className:"react-tabs__tab-text",children:w("output.visualOutput")})},0):null,Object(a.jsx)(u.a,{children:Object(a.jsx)("span",{className:"react-tabs__tab-text",children:w("output.textOutput")})},1)]}),!l&&k?Object(a.jsx)(Me,{}):null,!l&&E?Object(a.jsx)(Se.a,{skinny:!0}):null]}),Object(a.jsx)(h,{}),k?Object(a.jsx)(u.c,{children:Object(a.jsx)(Oe,{})},0):null,Object(a.jsx)(u.c,{children:Object(a.jsx)("pre",{className:"pythonrunner-console pythonrunner-console--".concat(N.fontSize),onClick:I,ref:g})},1)]})})},Ce=(n(576),n(599)),He=n(538),Re=n.n(He),Pe=(n(519),function(e){var t=e.errorType,n=e.additionalOnClose,c=Object(r.d)(),o=Object(s.b)().t,i=Object(r.e)((function(e){return e.editor.errorModalShowing})),u=function(){c(Object(b.e)()),n&&n()};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(Re.a,{isOpen:i,onRequestClose:u,className:"modal-content",overlayClassName:"modal-overlay",contentLabel:"Error",parentSelector:function(){return document.querySelector("#app")},appElement:document.getElementById("app")||void 0,children:[Object(a.jsx)("div",{className:"modal-content__header",children:Object(a.jsx)("h2",{className:"modal-content__heading",children:o("modal.error.heading")})}),o("modal.error.".concat(t,".message"),{defaultValue:null})&&Object(a.jsx)("div",{className:"modal-content__body",children:Object(a.jsx)("p",{className:"modal-content__text",children:o("modal.error.".concat(t,".message"))})}),Object(a.jsx)("div",{className:"modal-content__buttons",children:Object(a.jsx)(Ee.a,{className:"btn--primary",buttonText:o("modal.close"),onClickHandler:u})})]})})}),Ve=n(92);function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Le.apply(this,arguments)}var ze=function(e){return c.createElement("svg",Le({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),we||(we=c.createElement("path",{d:"M2.167.5A1.68 1.68 0 00.5 2.167v11.666c0 .911.756 1.667 1.667 1.667h11.666a1.68 1.68 0 001.667-1.667V8h-1.667v5.833H2.167V2.167H8V.5H2.167zm7.5 0v1.667h2.988L4.91 9.91l1.178 1.178 7.744-7.744v2.988H15.5V.5H9.667z"})))};var Ie=function(){var e,t=Object(r.e)((function(e){return e.editor.project})),n=t.components,o=t.image_list,l=Object(r.e)((function(e){return e.editor.focussedFileIndices}))[0],d=Object(r.e)((function(e){return e.editor.openFiles}))[0],p=Object(r.e)((function(e){return e.editor.codeRunTriggered})),h=Object(r.e)((function(e){return e.editor.justLoaded})),m=Object(r.e)((function(e){return e.editor.isEmbedded})),f=Object(r.e)((function(e){return e.editor.autorunEnabled})),O=Object(r.e)((function(e){return e.editor.codeHasBeenRun})),_=Object(Ve.c)(),g=Object(i.a)(_,2),y=g[0],w=g[1],N=Object(s.b)(),E=N.t,T=N.i18n.language,M=Object(r.d)(),S=Object(c.useRef)(null),k=Object(c.useState)(null),A=Object(i.a)(k,2),C=A[0],H=A[1],R=new RegExp("^".concat("https://rpf.io/")),P=[new RegExp("^#[a-zA-Z0-9]+")],V=[R],L=function(e,t){return e.some((function(e){return e.test(t)}))},z=Object(j.useMediaQuery)({query:Te.a}),I=function(e){return e.endsWith(".html")};e=m&&"true"===y.get("browserPreview")&&y.get("page")&&I(y.get("page"))?y.get("page"):!m&&I(d[l])?d[l]:"index.html";var D,B=Object(c.useState)(e),F=Object(i.a)(B,2),q=F[0],W=F[1],J=Object(c.useState)(q),G=Object(i.a)(J,2),U=G[0],Y=G[1],Q=Object(c.useState)(),X=Object(i.a)(Q,2),Z=X[0],$=X[1],K=function(e,t){var n=new Blob([e],{type:t});return URL.createObjectURL(n)},ee=function(e,t){var n;return(null===(n=e.parentNode)||void 0===n?void 0:n.tagName)&&e.parentNode.tagName.toLowerCase()===t},te=function(){window.addEventListener("message",(function(e){var t,n,c;"string"===typeof(null===(t=e.data)||void 0===t?void 0:t.msg)&&("ERROR: External link"===(null===(n=e.data)||void 0===n?void 0:n.msg)?H("externalLink"):"Allowed external link"===(null===(c=e.data)||void 0===c?void 0:c.msg)?($(e.data.payload.linkTo),M(Object(b.J)())):($(null),W("".concat(e.data.payload.linkTo,".html")),M(Object(b.J)())))}))};Object(c.useEffect)((function(){te()}),[]),Object(c.useEffect)((function(){if(h&&m)M(Object(b.J)());else if(!h&&f)return D=setTimeout((function(){M(Object(b.J)())}),2e3),function(){return clearTimeout(D)}}),[q]),Object(c.useEffect)((function(){p&&ne()}),[p]),Object(c.useEffect)((function(){Z||m||!I(d[l])||W(d[l])}),[l,d]),Object(c.useEffect)((function(){C&&(M(Object(b.A)()),te())}),[C]),Object(c.useEffect)((function(){m&&"true"===y.get("browserPreview")&&w(Object(x.a)(Object(x.a)({},Object.fromEntries(Object(v.a)(y))),{},{page:U}))}),[U]);var ne=function(){if(Y(q),Z)S.current.src=Z,M(Object(b.m)());else{var e=Object(Ce.parse)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index.html";return n.filter((function(t){return"".concat(t.name,".").concat(t.extension)===e}))[0]}(q).content),t=e.querySelector("body")||e;e.querySelectorAll("[href]").forEach((function(e){var t,c,r=n.filter((function(t){return"".concat(t.name,".").concat(t.extension)===e.attrs.href}));if("_blank"===(null===(t=e.attrs)||void 0===t?void 0:t.target)&&e.removeAttribute("target"),r.length)if(ee(e,"head")){var a=K(function(e){var t=Object(x.a)({},e);return"css"===e.extension&&o.forEach((function(e){t.content=t.content.replace(e.filename,e.url)})),t}(r[0]).content,"text/".concat(r[0].extension));e.setAttribute("href",a)}else e.setAttribute("href","javascript:void(0)"),c="window.parent.postMessage({msg: 'RELOAD', payload: { linkTo: '".concat(r[0].name,"' }})");else{var i=L(V,e.attrs.href);L(P,e.attrs.href)||i||ee(e,"head")?i&&(c="window.parent.postMessage({msg: 'Allowed external link', payload: { linkTo: '".concat(e.attrs.href,"' }})")):(e.setAttribute("href","javascript:void(0)"),c="window.parent.postMessage({msg: 'ERROR: External link'})")}c&&(e.removeAttribute("target"),e.setAttribute("onclick",c))})),e.querySelectorAll("[src]").forEach((function(e){var t=o.filter((function(t){return t.filename===e.attrs.src}));e.setAttribute("src",t.length?t[0].url:"")})),t.appendChild(Object(Ce.parse)('<meta filename="'.concat(q,'" />')));var c=K(e.toString(),"text/html");S.current.src=c,p&&M(Object(b.m)())}};return Object(a.jsxs)("div",{className:"htmlrunner-container",children:[Object(a.jsx)(Pe,{errorType:C,additionalOnClose:function(){return H(null)}}),m||f||O?Object(a.jsxs)(u.d,{children:[Object(a.jsxs)("div",{className:"react-tabs__tab-container",children:[Object(a.jsxs)(u.b,{children:[Object(a.jsx)(u.a,{children:Object(a.jsx)("span",{className:"react-tabs__tab-text",children:"".concat(U," ").concat(E("output.preview"))})}),!m&&Object(a.jsxs)(Ve.b,{className:"btn btn--tertiary htmlrunner-link",target:"_blank",to:"/".concat(T,"/embed/viewer/").concat(t.identifier,"?browserPreview=true&page=").concat(encodeURI(U)),children:[Object(a.jsx)("span",{className:"htmlrunner-link__text",children:E("output.newTab")}),Object(a.jsx)(ze,{})]})]}),!m&&z?Object(a.jsx)(Se.a,{skinny:!0}):null]}),Object(a.jsx)(u.c,{children:Object(a.jsx)("iframe",{className:"htmlrunner-iframe",id:"output-frame",title:E("runners.HtmlOutput"),ref:S,onLoad:function(){var e=S.current.contentDocument,t=function(e){return e&&e.querySelectorAll("meta[filename]")[0]?e.querySelectorAll("meta[filename]")[0].getAttribute("filename"):Z}(e);if(U!==t&&Y(t),e){var n=e.querySelector("a");n&&n.addEventListener("click",(function(e){e.preventDefault(),S.current.contentDocument.href=n.getAttribute("href")}))}$(null)}})})]}):null]})},De=function(e){var t="html"===e.projectType?Ie:Ae;return Object(a.jsx)(t,{})},Be=n(544);t.a=function(){var e=Object(r.e)((function(e){return e.editor.project})),t=Object(r.e)((function(e){return e.editor.isEmbedded})),n="true"===new URLSearchParams(window.location.search).get("browserPreview");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o,{}),Object(a.jsxs)("div",{className:"proj-runner-container",children:[Object(a.jsx)(De,{projectType:e.project_type}),t&&!n?Object(a.jsx)(Be.a,{embedded:!0}):null]})]})}},569:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(4),r=n(7),a=n(1),o=n(78),i=n(233),s=n(525),u=n(102),l=function(e){var t,n=e.projectIdentifier,l=(e.code,e.accessToken),d=void 0===l?null:l,j=function(){return JSON.parse(localStorage.getItem("project"))},b=Object(a.useState)(j()),p=Object(r.a)(b,2),h=p[0],m=p[1],f=Object(u.b)().i18n,O=Object(o.d)();t=(null===h||void 0===h?void 0:h.identifier)||"new",Object(a.useEffect)((function(){m(j())}),[t]),Object(a.useEffect)((function(){if(t&&h&&h.identifier===t||!t&&h)O(Object(i.x)(h));else if(h&&"python"===h.type){var e={name:h.name,type:h.project_type,components:Object(c.a)(h.components.map((function(e){return{name:e.name,extension:e.extension,content:e.content}})))};O(Object(i.x)(e))}else if(h&&"html"===h.type){var n={name:h.name,type:h.project_type,components:Object(c.a)(h.components.map((function(e){return{name:e.name,extension:e.extension,content:e.content}})))};O(Object(i.x)(n))}else{var r=s.b;O(Object(i.x)(r))}}),[t,h,f.language,d])}},570:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(1),r=n(78),a=n(233),o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.d)();Object(c.useEffect)((function(){e&&t(Object(a.r)())}),[])}},571:function(e,t,n){},572:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){},576:function(e,t,n){},579:function(e,t,n){},580:function(e,t,n){"use strict";var c=n(11),r=n(16),a=(n(1),n(78)),o=n(102),i=n(103),s=(n(519),n(233)),u=n(525),l=n(523),d=n(14);t.a=function(e){var t=e.buttons,n=void 0===t?null:t,j=e.text,b=void 0===j?null:j,p=e.withCloseButton,h=void 0===p||p,m=e.withClickToClose,f=void 0===m||m,O=Object(a.d)(),v=Object(o.b)().t,x=Object(a.e)((function(e){return e.auth.user})),_=Object(a.e)((function(e){return e.editor.notFoundModalShowing})),g=function(){return O(Object(s.j)())},y=function(){var e=Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x&&O(Object(s.I)("save")({project:u.b,accessToken:x.access_token,autosave:!1})),g();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(l.a,{isOpen:_,closeModal:f?g:null,withCloseButton:h,heading:v("project.notFoundModal.heading"),text:b||[{type:"paragraph",content:v("project.notFoundModal.text")}],buttons:n||[Object(d.jsx)(i.a,{className:"btn--primary",buttonText:v("project.notFoundModal.newProject"),onClickHandler:y},"new"),Object(d.jsx)("a",{className:"btn btn--secondary",href:"https://projects.raspberrypi.org",children:v("project.notFoundModal.projectsSiteLinkText")},"link")],defaultCallback:y})}},581:function(e,t,n){"use strict";n(1);var c=n(78),r=n(102),a=n(103),o=(n(519),n(233)),i=n(236),s=n(523),u=n(237),l=n(14);t.a=function(e){var t=e.buttons,n=void 0===t?null:t,d=e.text,j=void 0===d?null:d,b=e.withCloseButton,p=void 0===b||b,h=e.withClickToClose,m=void 0===h||h,f=Object(c.d)(),O=Object(r.b)().t,v=Object(c.e)((function(e){return e.editor.accessDeniedNoAuthModalShowing})),x=Object(c.e)((function(e){return e.editor.modals.accessDenied})),_=function(){return f(Object(o.b)())};return Object(l.jsx)(s.a,{isOpen:v,closeModal:m?_:null,withCloseButton:p,heading:O("project.accessDeniedNoAuthModal.heading"),text:j||[{type:"paragraph",content:O("project.accessDeniedNoAuthModal.text")}],buttons:n||[Object(l.jsx)(i.a,{buttonText:O("project.accessDeniedNoAuthModal.loginButtonText"),className:"btn--primary"},"login"),Object(l.jsx)("a",{className:"btn btn--secondary",href:"https://projects.raspberrypi.org",children:O("project.accessDeniedNoAuthModal.projectsSiteLinkText")},"link"),Object(l.jsx)(a.a,{buttonText:O("project.accessDeniedNoAuthModal.newProject"),className:"btn--tertiary",onClickHandler:_},"close")],defaultCallback:function(){Object(u.a)({accessDeniedData:x})}})}},714:function(e,t,n){},727:function(e,t,n){"use strict";n.r(t);var c=n(7),r=(n(714),n(571),n(1),n(78)),a=n(569),o=n(570),i=n(546),s=n(17),u=n(92),l=n(102),d=n(580),j=n(14),b=function(e){var t=Object(l.b)().t;return Object(j.jsx)(d.a,{withCloseButton:!1,withClickToClose:!1,buttons:[Object(j.jsx)("a",{className:"btn btn--secondary",href:"https://projects.raspberrypi.org",children:t("project.notFoundModal.projectsSiteLinkText")})],text:[{type:"paragraph",content:t("project.notFoundModal.embedded.text")}]})},p=n(581),h=function(e){var t=Object(l.b)().t;return Object(j.jsx)(p.a,{withCloseButton:!1,withClickToClose:!1,buttons:[Object(j.jsx)("a",{className:"btn btn--secondary",href:"https://projects.raspberrypi.org",children:t("project.accessDeniedNoAuthModal.projectsSiteLinkText")})],text:[{type:"paragraph",content:t("project.accessDeniedNoAuthModal.embedded.text")}]})};t.default=function(){var e=Object(r.e)((function(e){return e.editor.loading})),t=Object(r.e)((function(e){return e.editor.notFoundModalShowing})),n=Object(r.e)((function(e){return e.editor.accessDeniedNoAuthModalShowing})),l=Object(s.t)().identifier,d=Object(r.e)((function(e){return e.auth.user}))||{},p=Object(u.c)(),m="true"===Object(c.a)(p,1)[0].get("browserPreview");return Object(a.a)({projectIdentifier:l,accessToken:d.access_token,isEmbedded:!0,isBrowserPreview:m}),Object(o.a)(!0),Object(j.jsxs)("div",{className:"embedded-viewer",children:["success"===e?Object(j.jsx)(i.a,{}):null,t?Object(j.jsx)(b,{}):null,n?Object(j.jsx)(h,{}):null]})}}}]);
//# sourceMappingURL=8.731a62d8.chunk.js.map